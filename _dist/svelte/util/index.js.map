{"version":3,"file":"index.js","sources":["../../../src/svelte/util/TJSSvelteUtil.ts","../../../src/svelte/util/TJSSvelteConfigUtil.ts"],"sourcesContent":["// @ts-ignore\r\nimport { check_outros, group_outros, transition_out } from '#svelte/internal';\r\n\r\nimport type { SvelteComponent } from 'svelte';\r\n\r\n/**\r\n * Various utilities to duck type / detect Svelte components and run outro transition while destroying a component\r\n * externally.\r\n */\r\nclass TJSSvelteUtil\r\n{\r\n   /**\r\n    * Provides basic duck typing to determine if the provided function is a constructor function for a Svelte component.\r\n    *\r\n    * @param comp - Data to check as a Svelte component.\r\n    *\r\n    * @returns Whether basic duck typing succeeds.\r\n    */\r\n   static isComponent(comp: unknown): boolean\r\n   {\r\n      if (comp === null || comp === void 0 || typeof comp !== 'function') { return false; }\r\n\r\n      // When using Vite in a developer build the SvelteComponent is wrapped in a ProxyComponent class.\r\n      // This class doesn't define methods on the prototype, so we must check if the constructor name\r\n      // starts with `Proxy<` as it provides the wrapped component as `Proxy<_wrapped component name_>`.\r\n      const prototypeName: unknown = comp?.prototype?.constructor?.name;\r\n\r\n      if (typeof prototypeName === 'string' && (prototypeName.startsWith('Proxy<') ||\r\n       prototypeName === 'ProxyComponent'))\r\n      {\r\n         return true;\r\n      }\r\n\r\n      return typeof window !== 'undefined' ?\r\n       typeof comp?.prototype?.$destroy === 'function' && typeof comp?.prototype?.$on === 'function' : // client-side\r\n        typeof comp?.prototype?.render === 'function'; // server-side\r\n   }\r\n\r\n   /**\r\n    * Provides basic duck typing to determine if the provided object is a HMR ProxyComponent instance or class.\r\n    *\r\n    * @param {unknown}  comp - Data to check as a HMR proxy component.\r\n    *\r\n    * @returns {boolean} Whether basic duck typing succeeds.\r\n    */\r\n   static isHMRProxy(comp: unknown): boolean\r\n   {\r\n      const instanceName: string | undefined = comp?.constructor?.name;\r\n      if (typeof instanceName === 'string' && (instanceName.startsWith('Proxy<') || instanceName === 'ProxyComponent'))\r\n      {\r\n         return true;\r\n      }\r\n\r\n      // @ts-ignore\r\n      const prototypeName: unknown = comp?.prototype?.constructor?.name;\r\n      return typeof prototypeName === 'string' && (prototypeName.startsWith('Proxy<') ||\r\n       prototypeName === 'ProxyComponent');\r\n   }\r\n\r\n   /**\r\n    * Runs outro transition then destroys Svelte component.\r\n    *\r\n    * Workaround for https://github.com/sveltejs/svelte/issues/4056\r\n    *\r\n    * @param instance - A Svelte component.\r\n    *\r\n    * @returns Promise returned after outro transition completed and component destroyed.\r\n    */\r\n   static async outroAndDestroy(instance: SvelteComponent): Promise<void>\r\n   {\r\n      if (instance === void 0 || instance === null) { return Promise.resolve(); }\r\n\r\n      return new Promise((resolve: () => void): void =>\r\n      {\r\n         if (instance?.$$?.fragment && instance?.$$?.fragment?.o)\r\n         {\r\n            group_outros();\r\n            transition_out(instance.$$.fragment, 0, 0, () =>\r\n            {\r\n               instance?.$destroy?.();\r\n               resolve();\r\n            });\r\n            check_outros();\r\n         }\r\n         else\r\n         {\r\n            instance?.$destroy?.();\r\n            resolve();\r\n         }\r\n      });\r\n   }\r\n}\r\n\r\nObject.seal(TJSSvelteUtil);\r\n\r\nexport { TJSSvelteUtil };\r\n","import { CrossWindow }     from '#runtime/util/browser';\r\nimport { isObject }        from '#runtime/util/object';\r\n\r\nimport { TJSSvelteUtil }   from './TJSSvelteUtil';\r\n\r\nimport type {\r\n   ComponentConstructorOptions,\r\n   ComponentProps,\r\n   SvelteComponent } from 'svelte';\r\n\r\n/**\r\n * Provides utilities to verify and parse {@link TJSSvelteConfig} configuration objects.\r\n */\r\nclass TJSSvelteConfigUtil\r\n{\r\n   /**\r\n    * Validates `config` argument whether it is a valid {@link TJSSvelteConfig}.\r\n    *\r\n    * @param config - The potential config object to validate.\r\n    *\r\n    * @param [options] - Options.\r\n    *\r\n    * @param [options.raiseException=false] - If validation fails raise an exception.\r\n    *\r\n    * @returns Is the config a valid TJSSvelteConfig.\r\n    *\r\n    * @throws {TypeError}  Any validation error when `raiseException` is enabled.\r\n    */\r\n   static isConfig(config: unknown, { raiseException = false }: { raiseException?: boolean } = {}):\r\n    config is TJSSvelteConfig\r\n   {\r\n      if (!isObject(config))\r\n      {\r\n         if (raiseException) { throw new TypeError(`TJSSvelteConfigUtil.isConfig error: 'config' is not an object.`); }\r\n         return false;\r\n      }\r\n\r\n      if (!TJSSvelteUtil.isComponent(config.class))\r\n      {\r\n         if (raiseException)\r\n         {\r\n            throw new TypeError(\r\n             `TJSSvelteConfigUtil.isConfig error: 'config.class' is not a Svelte component constructor.`);\r\n         }\r\n         return false;\r\n      }\r\n\r\n      return true;\r\n   }\r\n\r\n   /**\r\n    * Parses a TyphonJS Svelte config object ensuring that the class specified is a Svelte component, loads any dynamic\r\n    * defined `context` or `props` preparing the config object for loading into the Svelte component.\r\n    *\r\n    * @param config - Svelte config object.\r\n    *\r\n    * @param [options] - Options.\r\n    *\r\n    * @param [options.thisArg] - `This` reference to set for invoking any `context` or `props` defined as functions.\r\n    *\r\n    * @returns The processed Svelte config object turned with parsed `props` & `context` converted into the format\r\n    *          supported by Svelte.\r\n    */\r\n   static parseConfig(config: TJSSvelteConfig, { thisArg = void 0 }: { thisArg?: unknown } = {}): TJSParsedSvelteConfig\r\n   {\r\n      if (!isObject(config))\r\n      {\r\n         throw new TypeError(\r\n          `TJSSvelteConfigUtil.parseConfig - 'config' is not an object:\\n${JSON.stringify(config)}.`);\r\n      }\r\n\r\n      if (!TJSSvelteUtil.isComponent(config.class))\r\n      {\r\n         throw new TypeError(\r\n          `TJSSvelteConfigUtil.parseConfig - 'class' is not a Svelte component constructor for config:\\n${\r\n            JSON.stringify(config)}.`);\r\n      }\r\n\r\n      if (config.hydrate !== void 0 && typeof config.hydrate !== 'boolean')\r\n      {\r\n         throw new TypeError(\r\n          `TJSSvelteConfigUtil.parseConfig - 'hydrate' is not a boolean for config:\\n${JSON.stringify(config)}.`);\r\n      }\r\n\r\n      if (config.intro !== void 0 && typeof config.intro !== 'boolean')\r\n      {\r\n         throw new TypeError(\r\n          `TJSSvelteConfigUtil.parseConfig - 'intro' is not a boolean for config:\\n${JSON.stringify(config)}.`);\r\n      }\r\n\r\n      if (config.target !== void 0 && typeof config.target !== 'string' && !CrossWindow.isElement(config.target) &&\r\n       !CrossWindow.isShadowRoot(config.target) && !CrossWindow.isDocumentFragment(config.target))\r\n      {\r\n         throw new TypeError(\r\n          `TJSSvelteConfigUtil.parseConfig - 'target' is not a Element, ShadowRoot, or DocumentFragment for config:\\n${\r\n           JSON.stringify(config)}.`);\r\n      }\r\n\r\n      if (config.anchor !== void 0 && typeof config.anchor !== 'string' && !CrossWindow.isElement(config.anchor) &&\r\n       !CrossWindow.isShadowRoot(config.anchor) && !CrossWindow.isDocumentFragment(config.anchor))\r\n      {\r\n         throw new TypeError(`TJSSvelteConfigUtil.parseConfig - 'anchor' is not a string, Element for config:\\n${\r\n          JSON.stringify(config)}.`);\r\n      }\r\n\r\n      if (config.context !== void 0 && typeof config.context !== 'function' && !isObject(config.context))\r\n      {\r\n         throw new TypeError(\r\n          `TJSSvelteConfigUtil.parseConfig - 'context' is not a function or object for config:\\n${\r\n            JSON.stringify(config)}.`);\r\n      }\r\n\r\n      const svelteConfig: { [key: string]: any } = { ...config };\r\n\r\n      let externalContext: { [key: string]: any } = {};\r\n\r\n      // If a context callback function is provided then invoke it with `this` being the Foundry app.\r\n      // If an object is returned it adds the entries to external context.\r\n      if (typeof svelteConfig.context === 'function')\r\n      {\r\n         const contextFunc: Function = svelteConfig.context;\r\n         delete svelteConfig.context;\r\n\r\n         const result: unknown = contextFunc.call(thisArg);\r\n         if (isObject(result))\r\n         {\r\n            externalContext = { ...result };\r\n         }\r\n         else\r\n         {\r\n            throw new Error(\r\n             `TJSSvelteConfigUtil.parseConfig - 'context' is a function that did not return an object for config:\\n${\r\n              JSON.stringify(config)}`);\r\n         }\r\n      }\r\n      else if (isObject(svelteConfig.context))\r\n      {\r\n         externalContext = svelteConfig.context;\r\n         delete svelteConfig.context;\r\n      }\r\n\r\n      // If a props is a function then invoke it with `this` being the Foundry app.\r\n      // If an object is returned set it as the props.\r\n      svelteConfig.props = this.#processProps(svelteConfig.props, thisArg, config);\r\n\r\n      svelteConfig.context = new Map();\r\n\r\n      svelteConfig.context.set('#external', externalContext);\r\n\r\n      return svelteConfig as TJSParsedSvelteConfig;\r\n   }\r\n\r\n   // Internal implementation ----------------------------------------------------------------------------------------\r\n\r\n   /**\r\n    * Processes Svelte props. Potentially props can be a function to invoke with `thisArg`.\r\n    *\r\n    * @param props - Svelte props.\r\n    *\r\n    * @param thisArg - `This` reference to set for invoking any props function.\r\n    *\r\n    * @param config - Svelte config\r\n    *\r\n    * @returns Svelte props.\r\n    */\r\n   static #processProps(props: { [key: string]: any } | Function, thisArg: unknown, config: TJSSvelteConfig):\r\n    { [key: string]: any }\r\n   {\r\n      // If a props is a function then invoke it with `this` being the Foundry app.\r\n      // If an object is returned set it as the props.\r\n      if (typeof props === 'function')\r\n      {\r\n         const result: unknown = props.call(thisArg);\r\n         if (isObject(result))\r\n         {\r\n            return result;\r\n         }\r\n         else\r\n         {\r\n            throw new Error(\r\n             `TJSSvelteConfigUtil.parseConfig - 'props' is a function that did not return an object for config:\\n${\r\n              JSON.stringify(config)}`);\r\n         }\r\n      }\r\n      else if (isObject(props))\r\n      {\r\n         return props;\r\n      }\r\n      else if (props !== void 0)\r\n      {\r\n         throw new Error(`TJSSvelteConfigUtil.parseConfig - 'props' is not a function or an object for config:\\n${\r\n          JSON.stringify(config)}`);\r\n      }\r\n\r\n      return {};\r\n   }\r\n}\r\n\r\nObject.seal(TJSSvelteConfigUtil);\r\n\r\nexport { TJSSvelteConfigUtil };\r\n\r\n/**\r\n * The result of after parsing {@link TJSSvelteConfig} or {@link TJSSvelteConfigDynamic} by\r\n * {@link TJSSvelteConfigUtil.parseConfig}.\r\n */\r\ninterface TJSParsedSvelteConfig\r\n{\r\n   /**\r\n    * The Svelte component class / constructor function.\r\n    */\r\n   class: new(options: ComponentConstructorOptions<ComponentProps<SvelteComponent>>) => SvelteComponent;\r\n\r\n   /**\r\n    * A child of `target` to render the component immediately before.\r\n    */\r\n   anchor?: Element;\r\n\r\n   /**\r\n    * The root-level additional data to add to the context passed to the component.\r\n    */\r\n   context: Map<string, any>;\r\n\r\n   /**\r\n    * If true, will play transitions on initial render, rather than waiting for subsequent state changes.\r\n    */\r\n   intro?: boolean;\r\n\r\n   /**\r\n    * Props to pass to the component.\r\n    */\r\n   props: { [key: string]: any };\r\n\r\n   /**\r\n    * The target to render component to.\r\n    */\r\n   target?: Element | Document | ShadowRoot;\r\n}\r\n\r\n/**\r\n * Provides the TRL / client side configuration object to load a Svelte component.\r\n *\r\n * Defines a dynamic config that allows the `context` and `props` properties to also be defined as a function that\r\n * returns an object of properties to respectively load into given component. This can be useful when defining a config\r\n * in a static context where it is helpful to pass an instance / `this` reference when defining `context` and `props`.\r\n *\r\n * See {@link TJSSvelteConfig} that narrows the type accepted for `context` and `props` to just an `object`.\r\n *\r\n * @typeParam Component - A specific component to narrow the allowed `class` and `props`.\r\n *\r\n * @typeParam [Config] - Additional options to omit properties from allowed in `context` or `props`.\r\n */\r\ninterface TJSSvelteConfigDynamic<Component extends SvelteComponent = SvelteComponent, Config extends {\r\n   ContextOmit?: keyof NonNullable<Config['ContextShape']>;\r\n   ContextShape?: { [key: string]: any };\r\n   PropsOmit?: keyof ComponentProps<Component>;\r\n} = { ContextOmit: never, ContextShape: {}, PropsOmit: never }>\r\n{\r\n   /**\r\n    * The Svelte component class / constructor function.\r\n    */\r\n   class: new(options: ComponentConstructorOptions<ComponentProps<Component>>) => Component;\r\n\r\n   /**\r\n    * A child of `target` to render the component immediately before.\r\n    */\r\n   anchor?: Element;\r\n\r\n   /**\r\n    * The root-level additional data to add to the context passed to the component.\r\n    */\r\n   context?: NarrowContextObject<Config> | NarrowContextFunction<Config>;\r\n\r\n   /**\r\n    * If true, will play transitions on initial render, rather than waiting for subsequent state changes.\r\n    */\r\n   intro?: boolean;\r\n\r\n   /**\r\n    * Props to pass to the component. You may define props as an `object` or a function returning an `object`.\r\n    */\r\n   props?: NarrowPropsObject<Component, Config> | NarrowPropsFunction<Component, Config>;\r\n\r\n   /**\r\n    * The target to render component to. By default, `document.body` is used as the target if not otherwise defined.\r\n    */\r\n   target?: Element | Document | ShadowRoot;\r\n}\r\n\r\n/**\r\n * Defines the TRL / client side configuration object to load a Svelte component.\r\n *\r\n * @typeParam Component - A specific component to narrow the allowed `class` and `props`.\r\n *\r\n * @typeParam [Config] - Additional options to omit properties from allowed in `context` or `props`.\r\n */\r\ninterface TJSSvelteConfig<Component extends SvelteComponent = SvelteComponent, Config extends {\r\n   ContextOmit?: keyof NonNullable<Config['ContextShape']>;\r\n   ContextShape?: { [key: string]: any };\r\n   PropsOmit?: keyof ComponentProps<Component>;\r\n} = { ContextOmit: never, ContextShape: {}, PropsOmit: never }> extends TJSSvelteConfigDynamic<Component, Config>\r\n{\r\n   /**\r\n    * The root-level additional data to add to the context passed to the component.\r\n    */\r\n   context?: NarrowContextObject<Config>;\r\n\r\n   /**\r\n    * Props to pass to the component. You may define props as an `object` or a function returning an `object`.\r\n    */\r\n   props?: NarrowPropsObject<Component, Config>;\r\n}\r\n\r\nexport { TJSParsedSvelteConfig, TJSSvelteConfig, TJSSvelteConfigDynamic };\r\n\r\n// Internal Utility Types --------------------------------------------------------------------------------------------\r\n\r\n/**\r\n * Always narrow and evaluate the `context` property even if `ConfigShape` just has the omitted keys. This is done\r\n * through the forced addition of `__uniqueKey_DO_NOT_USE_OR_REMOVE__`.\r\n *\r\n * Also do not evaluate if `ContextOmit` is undefined / never.\r\n */\r\ntype NarrowContextObject<Config extends {\r\n   ContextOmit?: keyof NonNullable<Config['ContextShape']> | '__uniqueKey_DO_NOT_USE_OR_REMOVE__';\r\n   ContextShape?: { [key: string]: unknown };\r\n}> = Config['ContextOmit'] extends never ? NonNullable<Config['ContextShape']> : Omit<\r\n   NonNullable<Config['ContextShape']> & { __uniqueKey_DO_NOT_USE_OR_REMOVE__?: never },\r\n   NonNullable<Config extends { ContextOmit: infer OmitType } ? OmitType : ''>\r\n>;\r\n\r\n/**\r\n * Always narrow and evaluate the `context` property even if `ConfigShape` just has the omitted keys. This is done\r\n * through the forced addition of `__uniqueKey_DO_NOT_USE_OR_REMOVE__`.\r\n *\r\n * Also do not evaluate if `ContextOmit` is undefined / never.\r\n */\r\ntype NarrowContextFunction<Config extends {\r\n   ContextOmit?: keyof NonNullable<Config['ContextShape']> | '__uniqueKey_DO_NOT_USE_OR_REMOVE__';\r\n   ContextShape?: { [key: string]: unknown };\r\n}> = (() => Config['ContextOmit'] extends never ? NonNullable<Config['ContextShape']> : Omit<\r\n   NonNullable<Config['ContextShape']> & { __uniqueKey_DO_NOT_USE_OR_REMOVE__?: never },\r\n   NonNullable<Config extends { ContextOmit: infer OmitType } ? OmitType : ''>\r\n>);\r\n\r\n/**\r\n * Narrows allowed props omitting / preventing definition of anything defined in `PropsOmit`.\r\n */\r\ntype NarrowPropsObject<Component extends SvelteComponent, Config extends {\r\n   PropsOmit?: keyof ComponentProps<Component>;\r\n}> = Partial<Omit<ComponentProps<Component>, NonNullable<Config['PropsOmit']>>>;\r\n\r\n/**\r\n * Narrows allowed props omitting / preventing definition of anything defined in `PropsOmit`.\r\n */\r\ntype NarrowPropsFunction<Component extends SvelteComponent, Config extends {\r\n   PropsOmit?: keyof ComponentProps<Component>;\r\n}> = (() => Partial<{\r\n   [K in keyof ComponentProps<Component>]: K extends NonNullable<Config['PropsOmit']> ? never :\r\n    ComponentProps<Component>[K];\r\n}>);\r\n"],"names":[],"mappings":"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"}