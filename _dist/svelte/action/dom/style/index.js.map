{"version":3,"file":"index.js","sources":["../../../../../src/svelte/action/dom/style/absWithinBorder.js","../../../../../src/svelte/action/dom/style/applyStyles.js","../../../../../src/svelte/action/dom/style/padToBorder.js"],"sourcesContent":["import { StyleMetric }     from '#runtime/util/dom/style';\r\nimport { ThemeObserver }   from '#runtime/util/dom/theme';\r\nimport { CrossRealm }      from '#runtime/util/realm';\r\n\r\n/**\r\n * Provides a Svelte action that applies absolute positioning to an element adjusting for any painted borders defined\r\n * by CSS `border-image` properties of the parent element of the target node / element of this action.\r\n *\r\n * When enabled, this action computes the effective painted border using\r\n * {@link #runtime/util/dom/style!StyleMetric.getPaintedBorderWidth} and applies inline `position: absolute` styles so\r\n * the element aligns correctly within the visible (non-border) content area of its container.\r\n *\r\n * Additionally, this action subscribes to {@link #runtime/util/dom/theme!ThemeObserver} and updates constraint\r\n * calculations when any global theme is changed. To force an update of constraint calculations provide and change\r\n * a superfluous / dummy property in the action options.\r\n *\r\n * @param {HTMLElement} node - Target element.\r\n *\r\n * @param {object}  [options] - Action Options.\r\n *\r\n * @param {boolean} [options.enabled] - When enabled set inline styles for absolute positioning taking into account\r\n *        any border image constraints.\r\n *\r\n * @returns {import('svelte/action').ActionReturn<{ enabled?: boolean }>} Lifecycle functions.\r\n */\r\nexport function absWithinBorder(node, { enabled = true } = {})\r\n{\r\n   let top = 0;\r\n   let right = 0;\r\n   let left = 0;\r\n   let bottom = 0;\r\n\r\n   /** Sets properties on node. */\r\n   function updateConstraints()\r\n   {\r\n      if (!CrossRealm.browser.isHTMLElement(node?.parentElement))\r\n      {\r\n         top = right = bottom = left = 0;\r\n      }\r\n      else\r\n      {\r\n         ({ top, right, bottom, left } = StyleMetric.getPaintedBorderWidth(node.parentElement));\r\n      }\r\n\r\n      if (enabled)\r\n      {\r\n         node.style.top = `${top}px`;\r\n         node.style.left = `${left}px`;\r\n         node.style.height = `calc(100% - ${top}px - ${bottom}px)`;\r\n         node.style.width = `calc(100% - ${left}px - ${right}px)`;\r\n         node.style.position = 'absolute';\r\n      }\r\n      else\r\n      {\r\n         top = right = bottom = left = 0;\r\n\r\n         node.style.top = '';\r\n         node.style.right = '';\r\n         node.style.bottom = '';\r\n         node.style.left = '';\r\n         node.style.position = '';\r\n      }\r\n   }\r\n\r\n   let unsubscribe = ThemeObserver.stores.themeName.subscribe(() => updateConstraints());\r\n\r\n   return {\r\n      destroy: () =>\r\n      {\r\n         unsubscribe?.();\r\n         unsubscribe = void 0;\r\n      },\r\n\r\n      /**\r\n       * @param {{ enabled?: boolean }}  newOptions - New options.\r\n       */\r\n      update: (newOptions) =>\r\n      {\r\n         if (typeof newOptions?.enabled === 'boolean') { enabled = newOptions?.enabled; }\r\n\r\n         updateConstraints();\r\n      }\r\n   };\r\n}\r\n","import { isObject }  from '#runtime/util/object';\r\n\r\n/**\r\n * Provides an action to apply CSS style properties provided as an object.\r\n *\r\n * @param {HTMLElement} node - Target element\r\n *\r\n * @param {{ [key: string]: string | null }}  properties - Hyphen case CSS property key / value object of properties\r\n *        to set.\r\n *\r\n * @returns {import('svelte/action').ActionReturn<{ [key: string]: string | null }>} Lifecycle functions.\r\n */\r\nexport function applyStyles(node, properties)\r\n{\r\n   /** Sets properties on node. */\r\n   function setProperties()\r\n   {\r\n      if (!isObject(properties)) { return; }\r\n\r\n      for (const prop of Object.keys(properties))\r\n      {\r\n         node.style.setProperty(`${prop}`, properties[prop]);\r\n      }\r\n   }\r\n\r\n   setProperties();\r\n\r\n   return {\r\n      /**\r\n       * @param {{ [key: string]: string | null }}  newProperties - Key / value object of properties to set.\r\n       */\r\n      update: (newProperties) =>\r\n      {\r\n         properties = newProperties;\r\n         setProperties();\r\n      }\r\n   };\r\n}\r\n","import { StyleMetric }     from '#runtime/util/dom/style';\r\nimport { ThemeObserver }   from '#runtime/util/dom/theme';\r\nimport { CrossRealm }      from '#runtime/util/realm';\r\n\r\n/**\r\n * Provides a Svelte action that applies inline styles for `padding` to an element adjusting for any painted borders\r\n * defined by CSS `border-image` properties of the target node / element of this action.\r\n *\r\n * When enabled, this action computes the effective painted border using\r\n * {@link #runtime/util/dom/style!StyleMetric.getPaintedBorderWidth} and applies inline `position: absolute` styles so\r\n * the element aligns correctly within the visible (non-border) content area of its container.\r\n *\r\n * Additionally, this action subscribes to {@link #runtime/util/dom/theme!ThemeObserver} and updates constraint\r\n * calculations when any global theme is changed. To force an update of constraint calculations provide and change\r\n * a superfluous / dummy property in the action options.\r\n *\r\n * @param {HTMLElement} node - Target element.\r\n *\r\n * @param {object}  [options] - Action Options.\r\n *\r\n * @param {boolean} [options.enabled] - When enabled set inline styles for padding taking into account any visual\r\n *        border image constraints.\r\n *\r\n * @param {boolean} [options.parent] - When true, the parent element to the action element is adjusted.\r\n *\r\n * @returns {import('svelte/action').ActionReturn<{ enabled?: boolean, parent?: boolean }>} Lifecycle functions.\r\n */\r\nexport function padToBorder(node, { enabled = true, parent = false } = {})\r\n{\r\n   let top = 0;\r\n   let right = 0;\r\n   let left = 0;\r\n   let bottom = 0;\r\n\r\n   /** @type {HTMLElement} */\r\n   let targetNode;\r\n\r\n   if (typeof enabled !== 'boolean') { enabled = false; }\r\n   if (typeof parent !== 'boolean') { parent = true; }\r\n\r\n   /** Sets properties on node. */\r\n   function updateConstraints()\r\n   {\r\n      if (!enabled)\r\n      {\r\n         // Clear any old inline styles on previous `targetNode`.\r\n         if (CrossRealm.browser.isHTMLElement(targetNode) && targetNode.style.padding !== '')\r\n         {\r\n            targetNode.style.padding = '';\r\n         }\r\n\r\n         targetNode = void 0;\r\n\r\n         return;\r\n      }\r\n\r\n      const newTarget = parent ? node.parentElement : node;\r\n\r\n      // Clear any old inline styles on previous `targetNode`.\r\n      if (newTarget !== targetNode && CrossRealm.browser.isHTMLElement(targetNode)) { targetNode.style.padding = ''; }\r\n\r\n      targetNode = newTarget;\r\n\r\n      if (!CrossRealm.browser.isHTMLElement(targetNode))\r\n      {\r\n         top = right = bottom = left = 0;\r\n      }\r\n      else\r\n      {\r\n         ({ top, right, bottom, left } = StyleMetric.getPaintedBorderWidth(targetNode));\r\n      }\r\n\r\n      if (enabled)\r\n      {\r\n         targetNode.style.padding = `${top}px ${right}px ${bottom}px ${left}px`;\r\n      }\r\n      else\r\n      {\r\n         top = right = bottom = left = 0;\r\n\r\n         targetNode.style.padding = '';\r\n      }\r\n   }\r\n\r\n   // This will invoke `updateConstraints` immediately.\r\n   let unsubscribe = ThemeObserver.stores.themeName.subscribe(() => updateConstraints());\r\n\r\n   return {\r\n      destroy: () =>\r\n      {\r\n         if (CrossRealm.browser.isHTMLElement(targetNode)) { targetNode.style.padding = ''; }\r\n\r\n         unsubscribe?.();\r\n         unsubscribe = void 0;\r\n\r\n         targetNode = void 0;\r\n      },\r\n\r\n      /**\r\n       * @param {{ enabled?: boolean, parent?: boolean }}  newOptions - New options.\r\n       */\r\n      update: (newOptions) =>\r\n      {\r\n         if (typeof newOptions?.enabled === 'boolean') { enabled = newOptions?.enabled; }\r\n         if (typeof newOptions?.parent === 'boolean') { parent = newOptions?.parent; }\r\n\r\n         updateConstraints();\r\n      }\r\n   };\r\n}\r\n"],"names":[],"mappings":"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"}