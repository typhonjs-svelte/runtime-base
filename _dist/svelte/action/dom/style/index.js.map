{"version":3,"file":"index.js","sources":["../../../../../src/svelte/action/dom/style/absoluteWithinBorder.js","../../../../../src/svelte/action/dom/style/applyStyles.js"],"sourcesContent":["import { StyleMetric }     from '#runtime/util/dom/style';\r\nimport { ThemeObserver }   from '#runtime/util/dom/theme';\r\nimport { CrossRealm }      from '#runtime/util/realm';\r\n\r\n/**\r\n * Provides a Svelte action that applies absolute positioning to an element adjusting for any painted borders defined\r\n * by CSS `border-image` properties.\r\n *\r\n * When enabled, this action computes the effective painted border using\r\n * {@link #runtime/util/dom/style!StyleMetric.getPaintedBorderWidth} and applies inline `position: absolute` styles so\r\n * the element aligns correctly within the visible (non-border) content area of its container.\r\n *\r\n * Additionally, this action subscribes to {@link #runtime/util/dom/theme!ThemeObserver} and updates constraint\r\n * calculations when any global theme is changed.\r\n *\r\n * @param {HTMLElement} node - Target element.\r\n *\r\n * @param {object}  [options] - Action Options.\r\n *\r\n * @param {boolean} [options.enabled] - When enabled set inline styles for absolute positioning taking into account\r\n *        any border image constraints.\r\n *\r\n * @returns {import('svelte/action').ActionReturn<{ enabled?: boolean }>} Lifecycle functions.\r\n */\r\nexport function absoluteWithinBorder(node, { enabled = true } = {})\r\n{\r\n   let top = 0;\r\n   let right = 0;\r\n   let left = 0;\r\n   let bottom = 0;\r\n\r\n   /** Sets properties on node. */\r\n   function updateConstraints()\r\n   {\r\n      if (!CrossRealm.browser.isHTMLElement(node?.parentElement))\r\n      {\r\n         top = right = bottom = left = 0;\r\n      }\r\n      else\r\n      {\r\n         ({ top, right, bottom, left } = StyleMetric.getPaintedBorderWidth(node.parentElement));\r\n      }\r\n\r\n      if (enabled)\r\n      {\r\n         node.style.top = `${top}px`;\r\n         node.style.left = `${left}px`;\r\n         node.style.height = `calc(100% - ${top}px - ${bottom}px)`;\r\n         node.style.width = `calc(100% - ${left}px - ${right}px)`;\r\n         node.style.position = 'absolute';\r\n      }\r\n      else\r\n      {\r\n         top = right = bottom = left = 0;\r\n\r\n         node.style.top = '';\r\n         node.style.right = '';\r\n         node.style.bottom = '';\r\n         node.style.left = '';\r\n         node.style.position = '';\r\n      }\r\n   }\r\n\r\n   let unsubscribe = ThemeObserver.stores.themeName.subscribe(() => updateConstraints());\r\n\r\n   return {\r\n      destroy: () =>\r\n      {\r\n         unsubscribe?.();\r\n         unsubscribe = void 0;\r\n      },\r\n\r\n      /**\r\n       * @param {{ enabled?: boolean }}  newOptions - New options.\r\n       */\r\n      update: (newOptions) =>\r\n      {\r\n         if (typeof newOptions?.enabled === 'boolean') { enabled = newOptions?.enabled; }\r\n\r\n         updateConstraints();\r\n      }\r\n   };\r\n}\r\n","import { isObject }  from '#runtime/util/object';\r\n\r\n/**\r\n * Provides an action to apply CSS style properties provided as an object.\r\n *\r\n * @param {HTMLElement} node - Target element\r\n *\r\n * @param {{ [key: string]: string | null }}  properties - Hyphen case CSS property key / value object of properties\r\n *        to set.\r\n *\r\n * @returns {import('svelte/action').ActionReturn<{ [key: string]: string | null }>} Lifecycle functions.\r\n */\r\nexport function applyStyles(node, properties)\r\n{\r\n   /** Sets properties on node. */\r\n   function setProperties()\r\n   {\r\n      if (!isObject(properties)) { return; }\r\n\r\n      for (const prop of Object.keys(properties))\r\n      {\r\n         node.style.setProperty(`${prop}`, properties[prop]);\r\n      }\r\n   }\r\n\r\n   setProperties();\r\n\r\n   return {\r\n      /**\r\n       * @param {{ [key: string]: string | null }}  newProperties - Key / value object of properties to set.\r\n       */\r\n      update: (newProperties) =>\r\n      {\r\n         properties = newProperties;\r\n         setProperties();\r\n      }\r\n   };\r\n}\r\n"],"names":[],"mappings":"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"}