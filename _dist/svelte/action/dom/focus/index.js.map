{"version":3,"file":"index.js","sources":["../../../../../src/svelte/action/dom/focus/isFocused.js"],"sourcesContent":["import { isMinimalWritableStore } from '#runtime/svelte/store/util';\r\n\r\n/**\r\n * Provides an action to monitor focus state of a given element and set an associated store with current focus state.\r\n *\r\n * This action is usable with any writable store.\r\n *\r\n * @param {HTMLElement} node - Target element.\r\n *\r\n * @param {import('#runtime/svelte/store/util').MinimalWritable<boolean>}  storeFocused - Update store for focus\r\n *        changes.\r\n *\r\n * @returns {(import('svelte/action').ActionReturn<\r\n *    import('#runtime/svelte/store/util').MinimalWritable<boolean>\r\n * >)} Lifecycle functions.\r\n */\r\nexport function isFocused(node, storeFocused)\r\n{\r\n   let localFocused = false;\r\n\r\n   /**\r\n    * Updates `storeFocused` w/ current focused state.\r\n    *\r\n    * @param {boolean}  current - current focused state.\r\n    */\r\n   function setFocused(current)\r\n   {\r\n      localFocused = current;\r\n\r\n      if (isMinimalWritableStore(storeFocused)) { storeFocused.set(localFocused); }\r\n   }\r\n\r\n   /**\r\n    * Focus event listener.\r\n    */\r\n   function onFocus()\r\n   {\r\n      setFocused(true);\r\n   }\r\n\r\n   /**\r\n    * Blur event listener.\r\n    */\r\n   function onBlur()\r\n   {\r\n      setFocused(false);\r\n   }\r\n\r\n   /**\r\n    * Activate listeners.\r\n    */\r\n   function activateListeners()\r\n   {\r\n      node.addEventListener('focus', onFocus);\r\n      node.addEventListener('blur', onBlur);\r\n   }\r\n\r\n   /**\r\n    * Remove listeners.\r\n    */\r\n   function removeListeners()\r\n   {\r\n      node.removeEventListener('focus', onFocus);\r\n      node.removeEventListener('blur', onBlur);\r\n   }\r\n\r\n   activateListeners();\r\n\r\n   return {\r\n      /**\r\n       * @param {import('#runtime/svelte/store/util').MinimalWritable<boolean>}  newStoreFocused - Update store for\r\n       *        focus changes.\r\n       */\r\n      update: (newStoreFocused) =>\r\n      {\r\n         storeFocused = newStoreFocused;\r\n         setFocused(localFocused);\r\n      },\r\n\r\n      destroy: () => removeListeners()\r\n   };\r\n}\r\n"],"names":[],"mappings":";;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS,SAAS,CAAC,IAAI,EAAE,YAAY;AAC5C;AACA,GAAG,IAAI,YAAY,GAAG,KAAK,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,SAAS,UAAU,CAAC,OAAO;AAC9B,GAAG;AACH,MAAM,YAAY,GAAG,OAAO,CAAC;AAC7B;AACA,MAAM,IAAI,sBAAsB,CAAC,YAAY,CAAC,EAAE,EAAE,YAAY,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,EAAE;AACnF,IAAI;AACJ;AACA;AACA;AACA;AACA,GAAG,SAAS,OAAO;AACnB,GAAG;AACH,MAAM,UAAU,CAAC,IAAI,CAAC,CAAC;AACvB,IAAI;AACJ;AACA;AACA;AACA;AACA,GAAG,SAAS,MAAM;AAClB,GAAG;AACH,MAAM,UAAU,CAAC,KAAK,CAAC,CAAC;AACxB,IAAI;AACJ;AACA;AACA;AACA;AACA,GAAG,SAAS,iBAAiB;AAC7B,GAAG;AACH,MAAM,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AAC9C,MAAM,IAAI,CAAC,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AAC5C,IAAI;AACJ;AACA;AACA;AACA;AACA,GAAG,SAAS,eAAe;AAC3B,GAAG;AACH,MAAM,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AACjD,MAAM,IAAI,CAAC,mBAAmB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AAC/C,IAAI;AACJ;AACA,GAAG,iBAAiB,EAAE,CAAC;AACvB;AACA,GAAG,OAAO;AACV;AACA;AACA;AACA;AACA,MAAM,MAAM,EAAE,CAAC,eAAe;AAC9B,MAAM;AACN,SAAS,YAAY,GAAG,eAAe,CAAC;AACxC,SAAS,UAAU,CAAC,YAAY,CAAC,CAAC;AAClC,OAAO;AACP;AACA,MAAM,OAAO,EAAE,MAAM,eAAe,EAAE;AACtC,IAAI,CAAC;AACL;;;;"}