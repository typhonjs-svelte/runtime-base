{"version":3,"file":"index.js","sources":["../../../../../src/svelte/action/dom/input/keyforward.js","../../../../../src/svelte/action/dom/input/useTinykeys.js"],"sourcesContent":["/**\n * Provides an action to forward on key down & up events. This can be any object that has associated `keydown` and\n * `keyup` methods. See {@link KeyStore} for a store implementation.\n *\n * @param {HTMLElement} node - Target element.\n *\n * @param {{ keydown: (event: KeyboardEvent) => void, keyup: (event: KeyboardEvent) => void }}  keyTarget - An object\n *        to forward events key down / up events to as pressed.\n *\n * @returns {(import('svelte/action').ActionReturn<\n *    { keydown: (event: KeyboardEvent) => void, keyup: (event: KeyboardEvent) => void }\n * >)} Action lifecycle methods.\n */\nexport function keyforward(node, keyTarget)\n{\n   if (typeof keyTarget?.keydown !== 'function' || typeof keyTarget.keyup !== 'function')\n   {\n      throw new TypeError(`'keyTarget' doesn't have required 'keydown' or 'keyup' methods.`);\n   }\n\n   /**\n    * @param {KeyboardEvent} event -\n    */\n   function onKeydown(event)\n   {\n      keyTarget.keydown(event);\n   }\n\n   /**\n    * @param {KeyboardEvent} event -\n    */\n   function onKeyup(event)\n   {\n      keyTarget.keyup(event);\n   }\n\n   /**\n    * Activates key listeners.\n    */\n   function activateListeners()\n   {\n      node.addEventListener('keydown', onKeydown);\n      node.addEventListener('keyup', onKeyup);\n   }\n\n   /**\n    * Removes key listeners.\n    */\n   function removeListeners()\n   {\n      node.removeEventListener('keydown', onKeydown);\n      node.removeEventListener('keyup', onKeyup);\n   }\n\n   activateListeners();\n\n   return {\n      update: (newKeyStore) =>  // eslint-disable-line no-shadow\n      {\n         keyTarget = newKeyStore;\n\n         if (typeof keyTarget?.keydown !== 'function' || typeof keyTarget.keyup !== 'function')\n         {\n            throw new TypeError(`'keyTarget' doesn't have required 'keydown' or 'keyup' methods.`);\n         }\n      },\n\n      destroy: () => removeListeners()\n   };\n}\n","import { tinykeys } from '#runtime/util/dom/input/tinykeys';\nimport { isObject } from '#runtime/util/object';\n\n/**\n * Provides an action to use `tinykeys`.\n *\n * @param {HTMLElement} node - Target element.\n *\n * @param {UseTinykeysData}  data - An object to forward events key down / up events to as pressed.\n *\n * @returns {import('svelte/action').ActionReturn<UseTinykeysData>} Action lifecycle methods.\n */\nexport function useTinykeys(node, data)\n{\n   if (!isObject(data)) { throw new TypeError(`'data' is not an object.`); }\n   if (!isObject(data.keyBindingMap)) { throw new TypeError(`'data.keyBindingMap' is not an object.`); }\n   if (data.options !== void 0 && !isObject(data.options)) { throw new TypeError(`'data.options' is not an object.`); }\n\n   let unsubscribe;\n\n   /**\n    * Activates key listeners.\n    */\n   function activateListeners()\n   {\n      unsubscribe = tinykeys(node, data.keyBindingMap, data.options);\n   }\n\n   /**\n    * Removes key listeners.\n    */\n   function removeListeners()\n   {\n      if (typeof unsubscribe === 'function')\n      {\n         unsubscribe();\n         unsubscribe = void 0;\n      }\n   }\n\n   activateListeners();\n\n   return {\n      update: (newData) =>\n      {\n         if (!isObject(newData)) { throw new TypeError(`'data' is not an object.`); }\n         if (!isObject(newData.keyBindingMap)) { throw new TypeError(`'data.keyBindingMap' is not an object.`); }\n         if (newData.options !== void 0 && !isObject(newData.options))\n         {\n            throw new TypeError(`'data.options' is not an object.`);\n         }\n\n         data = newData;\n\n         removeListeners();\n         activateListeners();\n      },\n\n      destroy: () => removeListeners()\n   };\n}\n\n/**\n * @typedef {object} UseTinykeysData\n *\n * @property {import('#runtime/util/dom/input/tinykeys').KeyBindingMap} keyBindingMap Key binding map to instantiate\n * `tinykeys` implementation.\n *\n * @property {import('#runtime/util/dom/input/tinykeys').KeyBindingOptions} [options] Options to pass to `tinykeys`.\n */\n"],"names":[],"mappings":"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"}