{"version":3,"file":"index.js","sources":["../../src/util/_/CrossRealm.ts","../../src/util/_/Frozen.ts","../../src/util/_/Hashing.ts","../../src/util/_/Strings.ts","../../src/util/_/Timing.ts"],"sourcesContent":["import { isObject } from '#runtime/util/object';\n\n/**\n * Provides cross-realm checks for DOM nodes / elements, events, and essential duck typing for any class-based object\n * with a constructor name. A realm is an execution environment with its own global object and intrinsics; values\n * created in different realms do not share prototypes, so checks like `instanceof` can fail across realms. This\n * includes sharing JS code across browser windows.\n *\n * The impetus is that certain browsers such as Chrome and Firefox behave differently when performing `instanceof`\n * checks when elements are moved between browser windows. With Firefox in particular, the entire JS runtime cannot use\n * `instanceof` checks as the instances of fundamental DOM elements differ between windows.\n *\n * TRL supports moving applications from a main central browser window and popping them out into separate standalone\n * app instances in a separate browser window. In this case, for essential DOM element and event checks, it is necessary\n * to employ the workarounds found in `CrossRealm`.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution_model#realms\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof#instanceof_and_multiple_realms\n * @see https://262.ecma-international.org/#sec-code-realms\n */\nabstract class CrossRealm\n{\n   private constructor()\n   {\n      throw new Error('CrossRealm constructor: This is a static class and should not be constructed.');\n   }\n\n   /**\n    * Class names for all focusable element types.\n    */\n   static #FocusableElementClassNames: string[] = ['HTMLAnchorElement', 'HTMLButtonElement', 'HTMLDetailsElement',\n    'HTMLEmbedElement', 'HTMLIFrameElement', 'HTMLInputElement', 'HTMLObjectElement', 'HTMLSelectElement',\n     'HTMLTextAreaElement'];\n\n   /**\n    * DOM nodes with defined `ownerDocument` property.\n    */\n   static #NodesWithOwnerDocument: Set<number> = new Set([Node.ELEMENT_NODE, Node.TEXT_NODE, Node.COMMENT_NODE,\n    Node.DOCUMENT_FRAGMENT_NODE]);\n\n   // Various UIEvent sets for duck typing by constructor name.\n\n   /**\n    * Duck typing class names for pointer events.\n    */\n   static #PointerEventSet: Set<string> = new Set(['MouseEvent', 'PointerEvent']);\n\n   /**\n    * Duck typing class names for all UIEvents.\n    */\n   static #UIEventSet: Set<string> = new Set(['UIEvent', 'FocusEvent', 'MouseEvent', 'WheelEvent', 'KeyboardEvent', 'PointerEvent',\n    'TouchEvent', 'InputEvent', 'CompositionEvent', 'DragEvent']);\n\n   /**\n    * Duck typing class names for events considered as user input.\n    */\n   static #UserInputEventSet: Set<string> = new Set(['KeyboardEvent', 'MouseEvent', 'PointerEvent']);\n\n   /**\n    * Internal options used by `#checkDOMInstanceType` when retrieving the Window reference from a Node that doesn't\n    * define `ownerDocument`.\n    */\n   static #optionsInternalCheckDOM: { throws: boolean } = { throws: false };\n\n   // DOM Querying ---------------------------------------------------------------------------------------------------\n\n   /**\n    * Convenience method to test if the given target element is the current active element.\n    *\n    * @param target - Element to test as current active element.\n    */\n   static isActiveElement(target: Element): boolean\n   {\n      // Duck type if target has known defined `ownerDocument` property.\n      if (this.#hasOwnerDocument(target))\n      {\n         return target?.ownerDocument?.activeElement === target;\n      }\n\n      return false;\n   }\n\n   /**\n    * Convenience method to retrieve the `document.activeElement` value in the current Window context of a DOM Node /\n    * Element, EventTarget, Document, or Window.\n    *\n    * @param target - DOM Node / Element, EventTarget, Document, UIEvent or Window to query.\n    *\n    * @param [options] - Options.\n    *\n    * @returns Active element or `undefined` when `throws` option is `false` and the target is invalid.\n    *\n    * @throws {@link TypeError} Target must be a DOM Node / Element, Document, UIEvent, or Window.\n    */\n   static getActiveElement(target: CrossRealm.GetTarget, { throws = true }: CrossRealm.GetOptions = {}): Element |\n    null | undefined\n   {\n      // Duck type if target has known defined `ownerDocument` property.\n      if (this.#hasOwnerDocument(target)) { return target?.ownerDocument?.activeElement ?? null; }\n\n      // Duck type if target is a UIEvent.\n      if (this.isUIEvent(target) && isObject(target?.view)) { return target?.view?.document?.activeElement ?? null; }\n\n      // Duck type if target is a Document.\n      if (this.isDocument(target)) { return target?.activeElement ?? null; }\n\n      // Duck type if target is a Window.\n      if (this.isWindow(target)) { return target?.document?.activeElement ?? null; }\n\n      if (throws) { throw new TypeError(`'target' must be a DOM Node / Element, Document, UIEvent, or Window.`); }\n\n      return void 0;\n   }\n\n   /**\n    * Convenience method to retrieve the `Document` value in the current context of a DOM Node / Element, EventTarget,\n    * Document, UIEvent, or Window.\n    *\n    * @param target - DOM Node / Element, EventTarget, Document, UIEvent or Window to query.\n    *\n    * @param [options] - Options.\n    *\n    * @returns {Document} Active document or `undefined` when `throws` option is `false` and the target is invalid.\n    *\n    * @throws {@link TypeError} Target must be a DOM Node / Element, Document, UIEvent, or Window.\n    */\n   static getDocument(target: CrossRealm.GetTarget, { throws = true } = {}): Document | undefined\n   {\n      // Duck type if target has known defined `ownerDocument` property.\n      if (this.#hasOwnerDocument(target)) { return target?.ownerDocument; }\n\n      // Duck type if target is a UIEvent.\n      if (this.isUIEvent(target) && isObject(target?.view)) { return target?.view?.document; }\n\n      // Duck type if target is a Document.\n      if (this.isDocument(target)) { return target; }\n\n      // Duck type if target is a Window.\n      if (this.isWindow(target)) { return target?.document; }\n\n      if (throws) { throw new TypeError(`'target' must be a DOM Node / Element, Document, UIEvent, or Window.`); }\n\n      return void 0;\n   }\n\n   /**\n    * Convenience method to retrieve the `Window` value in the current context of a DOM Node / Element, EventTarget,\n    * Document, or Window.\n    *\n    * @param target - DOM Node / Element, EventTarget, Document, UIEvent or Window to query.\n    *\n    * @param [options] - Options.\n    *\n    * @returns Active window or `undefined` when `throws` option is `false` and the target is invalid.\n    *\n    * @throws {@link TypeError} Target must be a DOM Node / Element, Document, UIEvent, or Window.\n    */\n   static getWindow(target: CrossRealm.GetTarget, { throws = true } = {}): Window | undefined\n   {\n      // Duck type if target has known defined `ownerDocument` property.\n      if (this.#hasOwnerDocument(target)) { return target.ownerDocument?.defaultView ?? globalThis as typeof window; }\n\n      // Duck type if target is a UIEvent.\n      if (this.isUIEvent(target) && isObject(target?.view)) { return target.view ?? globalThis as typeof window; }\n\n      // Duck type if target is a Document.\n      if (this.isDocument(target)) { return target.defaultView ?? globalThis as typeof window; }\n\n      // Duck type if target is a Window.\n      if (this.isWindow(target)) { return target; }\n\n      if (throws) { throw new TypeError(`'target' must be a DOM Node / Element, Document, UIEvent, or Window.`); }\n\n      return void 0;\n   }\n\n   // ES / Browser API basic prototype tests -------------------------------------------------------------------------\n\n   /**\n    * Provides basic prototype string type checking if `target` is a CSSImportRule.\n    *\n    * @param target - A potential CSSImportRule to test.\n    *\n    * @returns Is `target` a CSSImportRule.\n    */\n   static isCSSImportRule(target: unknown): target is CSSImportRule\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object CSSImportRule]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a CSSLayerBlockRule.\n    *\n    * @param target - A potential CSSLayerBlockRule to test.\n    *\n    * @returns Is `target` a CSSLayerBlockRule.\n    */\n   static isCSSLayerBlockRule(target: unknown): target is CSSLayerBlockRule\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object CSSLayerBlockRule]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a CSSStyleRule.\n    *\n    * @param target - A potential CSSStyleRule to test.\n    *\n    * @returns Is `target` a CSSStyleRule.\n    */\n   static isCSSStyleRule(target: unknown): target is CSSStyleRule\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object CSSStyleRule]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a CSSStyleSheet.\n    *\n    * @param target - A potential CSSStyleSheet to test.\n    *\n    * @returns Is `target` a CSSStyleSheet.\n    */\n   static isCSSStyleSheet(target: unknown): target is CSSStyleSheet\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object CSSStyleSheet]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a Date.\n    *\n    * @param target - A potential Date to test.\n    *\n    * @returns Is `target` a Date.\n    */\n   static isDate(target: unknown): target is Date\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object Date]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a Document.\n    *\n    * @param target - A potential Document to test.\n    *\n    * @returns Is `target` a Document.\n    */\n   static isDocument(target: unknown): target is Document\n   {\n      // Match any DOM Document object by its default @@toStringTag.\n      // - HTMLDocument (`[object HTMLDocument]` in modern browsers & JSDOM)\n      // - generic Document (`[object Document]` in older or XML contexts)\n      return isObject(target) && /^\\[object (HTML)?Document]$/.test(Object.prototype.toString.call(target));\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a Map.\n    *\n    * @param target - A potential Map to test.\n    *\n    * @returns Is `target` a Map.\n    */\n   static isMap(target: unknown): target is Map<unknown, unknown>\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object Map]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a Promise.\n    *\n    * @param target - A potential Promise to test.\n    *\n    * @returns Is `target` a Promise.\n    */\n   static isPromise(target: unknown): target is Promise<unknown>\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object Promise]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a RegExp.\n    *\n    * @param target - A potential RegExp to test.\n    *\n    * @returns Is `target` a RegExp.\n    */\n   static isRegExp(target: unknown): target is RegExp\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object RegExp]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a Set.\n    *\n    * @param target - A potential Set to test.\n    *\n    * @returns Is `target` a Set.\n    */\n   static isSet(target: unknown): target is Set<unknown>\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object Set]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a URL.\n    *\n    * @param target - A potential URL to test.\n    *\n    * @returns Is `target` a URL.\n    */\n   static isURL(target: unknown): target is URL\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object URL]';\n   }\n\n   /**\n    * Provides basic prototype string type checking if `target` is a Window.\n    *\n    * @param target - A potential Window to test.\n    *\n    * @returns Is `target` a Window.\n    */\n   static isWindow(target: unknown): target is Window\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object Window]';\n   }\n\n   // DOM Element typing ---------------------------------------------------------------------------------------------\n\n   /**\n    * Ensures that the given target is an `instanceof` all known DOM elements that are focusable. Please note that\n    * additional checks are required regarding focusable state; use {@link A11yHelper.isFocusable} for a complete check.\n    *\n    * @param target - Target to test for `instanceof` focusable HTML element.\n    *\n    * @returns Is target an `instanceof` a focusable DOM element.\n    */\n   static isFocusableHTMLElement(target: unknown): boolean\n   {\n      for (let cntr = this.#FocusableElementClassNames.length; --cntr >= 0;)\n      {\n         if (this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, this.#FocusableElementClassNames[cntr]))\n         {\n            return true;\n         }\n      }\n\n      return false;\n   }\n\n   /**\n    * Provides precise type checking if `target` is a DocumentFragment.\n    *\n    * @param target - A potential DocumentFragment to test.\n    *\n    * @returns Is `target` a DocumentFragment.\n    */\n   static isDocumentFragment(target: unknown): target is DocumentFragment\n   {\n      return this.#checkDOMInstanceType(target, Node.DOCUMENT_FRAGMENT_NODE, 'DocumentFragment');\n   }\n\n   /**\n    * Provides precise type checking if `target` is an Element.\n    *\n    * @param target - A potential Element to test.\n    *\n    * @returns Is `target` an Element.\n    */\n   static isElement(target: unknown): target is Element\n   {\n      return this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, 'Element');\n   }\n\n   /**\n    * Provides precise type checking if `target` is a HTMLAnchorElement.\n    *\n    * @param target - A potential HTMLAnchorElement to test.\n    *\n    * @returns Is `target` a HTMLAnchorElement.\n    */\n   static isHTMLAnchorElement(target: unknown): target is HTMLAnchorElement\n   {\n      return this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, 'HTMLAnchorElement');\n   }\n\n   /**\n    * Provides precise type checking if `target` is an HTMLElement.\n    *\n    * @param target - A potential HTMLElement to test.\n    *\n    * @returns Is `target` a HTMLElement.\n    */\n   static isHTMLElement(target: unknown): target is HTMLElement\n   {\n      return this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, 'HTMLElement');\n   }\n\n   /**\n    * Provides precise type checking if `target` is a Node.\n    *\n    * @param target - A potential Node to test.\n    *\n    * @returns Is `target` a DOM Node.\n    */\n   static isNode(target: unknown): target is Node\n   {\n      if (typeof (target as Node)?.nodeType !== 'number') { return false; }\n\n      if (target instanceof globalThis.Node) { return true; }\n\n      // Must retrieve the window by a more thorough duck type via `getWindow` as not all Nodes have `ownerDocument`\n      // defined.\n      const activeWindow = this.getWindow(target as Window, this.#optionsInternalCheckDOM);\n\n      const TargetNode = (activeWindow as typeof window)?.Node;\n      return TargetNode && target instanceof TargetNode;\n   }\n\n   /**\n    * Provides precise type checking if `target` is a ShadowRoot.\n    *\n    * @param target - A potential ShadowRoot to test.\n    *\n    * @returns Is `target` a ShadowRoot.\n    */\n   static isShadowRoot(target: unknown): target is ShadowRoot\n   {\n      // ShadowRoot is a specialized type of DocumentFragment.\n      return this.#checkDOMInstanceType(target, Node.DOCUMENT_FRAGMENT_NODE, 'ShadowRoot');\n   }\n\n   /**\n    * Provides precise type checking if `target` is a SVGElement.\n    *\n    * @param target - A potential SVGElement to test.\n    *\n    * @returns Is `target` a SVGElement.\n    */\n   static isSVGElement(target: unknown): target is SVGElement\n   {\n      return this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, 'SVGElement');\n   }\n\n   // Event typing ---------------------------------------------------------------------------------------------------\n\n   /**\n    * Provides basic duck type checking for `Event` signature and optional constructor name(s).\n    *\n    * @param target - A potential DOM event to test.\n    *\n    * @param [types] Specific constructor name or Set of constructor names to match.\n    *\n    * @returns Is `target` an Event with optional constructor name check.\n    */\n   static isEvent(target: unknown, types: string | Set<string>): target is Event\n   {\n      if (typeof (target as Event)?.type !== 'string' || typeof (target as Event)?.defaultPrevented !== 'boolean' ||\n       typeof (target as Event)?.stopPropagation !== 'function')\n      {\n         return false;\n      }\n\n      return types !== void 0 ? this.isCtorName(target, types) : true;\n   }\n\n   /**\n    * Provides basic duck type checking for `Event` signature for standard mouse / pointer events including\n    * `MouseEvent` and `PointerEvent`.\n    *\n    * @param target - A potential DOM event to test.\n    *\n    * @returns Is `target` a MouseEvent or PointerEvent.\n    */\n   static isPointerEvent(target: unknown): target is PointerEvent\n   {\n      return this.isEvent(target, this.#PointerEventSet);\n   }\n\n   /**\n    * Provides basic duck type checking for `Event` signature for all UI events.\n    *\n    * @param target - A potential DOM event to test.\n    *\n    * @returns Is `target` a UIEvent.\n    * @see https://developer.mozilla.org/en-US/docs/Web/API/UIEvent\n    */\n   static isUIEvent(target: unknown): target is UIEvent\n   {\n      return this.isEvent(target, this.#UIEventSet);\n   }\n\n   /**\n    * Provides basic duck type checking for `Event` signature for standard user input events including `KeyboardEvent`,\n    * `MouseEvent`, and `PointerEvent`.\n    *\n    * @param target - A potential DOM event to test.\n    *\n    * @returns Is `target` a Keyboard, MouseEvent, or PointerEvent.\n    */\n   static isUserInputEvent(target: unknown): target is KeyboardEvent | MouseEvent | PointerEvent\n   {\n      return this.isEvent(target, this.#UserInputEventSet);\n   }\n\n   // Generic typing -------------------------------------------------------------------------------------------------\n\n   /**\n    * Provides basic type checking by constructor name(s) for objects. This can be useful when checking multiple\n    * constructor names against a provided Set.\n    *\n    * @param target - Object to test for constructor name.\n    *\n    * @param types Specific constructor name or Set of constructor names to match.\n    *\n    * @returns Does the provided object constructor name match the types provided.\n    */\n   static isCtorName(target: unknown, types: string | Set<string>): boolean\n   {\n      if (!isObject(target)) { return false; }\n\n      if (typeof types === 'string' && target?.constructor?.name === types) { return true; }\n\n      return !!(types as Set<string>)?.has(target?.constructor?.name);\n   }\n\n   // Errors ---------------------------------------------------------------------------------------------------------\n\n   /**\n    * Provides basic duck type checking and error name for {@link DOMException}.\n    *\n    * @param target - Error to duck type test.\n    *\n    * @param name - Specific error name.\n    *\n    * @returns Is target a DOMException matching the error name.\n    *\n    * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMException#error_names\n    */\n   static isDOMException(target: unknown, name: string): boolean\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === '[object DOMException]' &&\n       target.name === name;\n   }\n\n   // Internal implementation ----------------------------------------------------------------------------------------\n\n   /**\n    * Internal generic DOM `instanceof` check. First will attempt to find the class name by `globalThis` falling back\n    * to the {@link Window} associated with the DOM node.\n    *\n    * @param target - Target to test.\n    *\n    * @param nodeType - Node type constant.\n    *\n    * @param className - DOM classname for instanceof check.\n    *\n    * @returns Is the target the given nodeType and instance of class name.\n    */\n   static #checkDOMInstanceType(target: unknown, nodeType: number, className: string): boolean\n   {\n      if (!isObject(target)) { return false; }\n\n      if (target.nodeType !== nodeType) { return false; }\n\n      const GlobalClass: any = (window as unknown as Record<string, unknown>)[className];\n\n      if (GlobalClass && target instanceof GlobalClass) { return true; }\n\n      const activeWindow: Window | undefined | null = this.#hasOwnerDocument(target) ?\n         target?.ownerDocument?.defaultView :\n         // @ts-ignore: Safe in this context.\n         this.getWindow(target, this.#optionsInternalCheckDOM);\n\n      const TargetClass: any = (activeWindow as unknown as Record<string, unknown>)?.[className];\n\n      return TargetClass && target instanceof TargetClass;\n   }\n\n   static #hasOwnerDocument(target: unknown): target is Element\n   {\n      return typeof target === 'object' && target !== null &&\n       this.#NodesWithOwnerDocument.has((target as Node)?.nodeType);\n   }\n}\n\ndeclare namespace CrossRealm {\n\n   /**\n    * Defines the DOM API targets usable for all `get` methods.\n    */\n   export type GetTarget = Document | EventTarget | Node | UIEvent | Window;\n\n   /**\n    * Defines options for all `get` methods.\n    */\n   export interface GetOptions {\n      /**\n       * When `true` and the target is invalid, throw an exception. If `false` and the target is invalid `undefined`\n       * is returned; default: `true`.\n       *\n       * @defaultValue `true`\n       */\n      throws?: boolean;\n   }\n}\n\nexport { CrossRealm }\n","/**\n * Provides strictly readonly collections at runtime including {@link ReadonlyMap} and {@link ReadonlySet}.\n *\n * The protection level provided is for accidental modification. A determined caller could still mutate via\n * `Map.prototype.set.call(frozenMap, ...)` or `Set.prototype.add.call(frozenSet, ...)`.\n */\nabstract class Frozen\n{\n   private constructor()\n   {\n      throw new Error('Frozen constructor: This is a static class and should not be constructed.');\n   }\n\n   /**\n    * @param [entries] - Target Map or iterable of [key, value] pairs.\n    *\n    * @returns A strictly ReadonlyMap.\n    */\n   static Map<K, V>(entries?: Iterable<[K, V]>): ReadonlyMap<K, V>\n   {\n      const result = new Map(entries) as ReadonlyMap<K, V>;\n\n      // @ts-expect-error\n      result.set = void 0;\n      // @ts-expect-error\n      result.delete = void 0;\n      // @ts-expect-error\n      result.clear = void 0;\n\n      return result;\n   }\n\n   /**\n    * @param [data] - Target Set or iterable list.\n    *\n    * @returns A strictly ReadonlySet.\n    */\n   static Set<T>(data?: Iterable<T>): ReadonlySet<T>\n   {\n      const result = new Set(data) as ReadonlySet<T>;\n\n      // @ts-expect-error\n      result.add = void 0;\n      // @ts-expect-error\n      result.delete = void 0;\n      // @ts-expect-error\n      result.clear = void 0;\n\n      return result;\n   }\n}\n\nObject.freeze(Frozen);\n\nexport { Frozen };\n","/**\r\n * Provides various utilities for generating hash codes for strings and UUIDs.\r\n */\r\nexport abstract class Hashing\r\n{\r\n   static #cryptoBuffer = new Uint8Array(1);\r\n\r\n   static #regexUuidv4 = /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i;\r\n\r\n   static #regexUuidReplace = /[018]/g;\r\n\r\n   static #uuidTemplate = '10000000-1000-4000-8000-100000000000';\r\n\r\n   private constructor()\r\n   {\r\n      throw new Error('Hashing constructor: This is a static class and should not be constructed.');\r\n   }\r\n\r\n   /**\r\n    * Provides a solid string hashing algorithm.\r\n    *\r\n    * Sourced from: https://stackoverflow.com/a/52171480\r\n    *\r\n    * @param str - String to hash.\r\n    *\r\n    * @param [seed=0] - A seed value altering the hash; default value: `0`.\r\n    *\r\n    * @returns Hash code.\r\n    */\r\n   static hashCode(str: string, seed: number = 0): number\r\n   {\r\n      if (typeof str !== 'string') { return 0; }\r\n\r\n      let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;\r\n\r\n      for (let ch, i = 0; i < str.length; i++)\r\n      {\r\n         ch = str.charCodeAt(i);\r\n         h1 = Math.imul(h1 ^ ch, 2654435761);\r\n         h2 = Math.imul(h2 ^ ch, 1597334677);\r\n      }\r\n\r\n      h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);\r\n      h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);\r\n\r\n      return 4294967296 * (2097151 & h2) + (h1 >>> 0);\r\n   }\r\n\r\n   /**\r\n    * Validates that the given string is formatted as a UUIDv4 string.\r\n    *\r\n    * @param uuid - UUID string to test.\r\n    *\r\n    * @returns Is UUIDv4 string.\r\n    */\r\n   static isUuidv4(uuid: unknown): uuid is string\r\n   {\r\n      return typeof uuid === 'string' && this.#regexUuidv4.test(uuid);\r\n   }\r\n\r\n   /**\r\n    * Generates a UUID v4 compliant ID. Please use a complete UUID generation package for guaranteed compliance.\r\n    *\r\n    * This code is an evolution of the `Jed UUID` from the following Gist.\r\n    * https://gist.github.com/jed/982883\r\n    *\r\n    * There is a public domain / free copy license attached to it that is not a standard OSS license...\r\n    * https://gist.github.com/jed/982883#file-license-txt\r\n    *\r\n    * @privateRemarks\r\n    * The code golfing was removed in the implementation below.\r\n    *\r\n    * @returns UUIDv4\r\n    */\r\n   static uuidv4(): string\r\n   {\r\n      return this.#uuidTemplate.replace(this.#regexUuidReplace, (c: string) =>\r\n       (Number(c) ^ (globalThis.crypto ?? (globalThis as any).msCrypto).getRandomValues(\r\n        this.#cryptoBuffer)[0] & 15 >> Number(c) / 4).toString(16));\r\n   }\r\n}\r\n","/**\r\n * Provides utility functions for strings.\r\n *\r\n * This class should not be constructed as it only contains static methods.\r\n */\r\nexport abstract class Strings\r\n{\r\n   static #regexEscape = /[-/\\\\^$*+?.()|[\\]{}]/g;\r\n   static #regexNormalize = /[\\x00-\\x1F]/gm;\r\n   static #regexReplacement = '\\\\$&';\r\n\r\n   private constructor()\r\n   {\r\n      throw new Error('Strings constructor: This is a static class and should not be constructed.');\r\n   }\r\n\r\n   /**\r\n    * Escape a given input string prefacing special characters with backslashes for use in a regular expression.\r\n    *\r\n    * @param str - An un-escaped input string.\r\n    *\r\n    * @returns The escaped string suitable for use in a regular expression.\r\n    */\r\n   static escape(str: string): string\r\n   {\r\n      return str.replace(this.#regexEscape, this.#regexReplacement);\r\n   }\r\n\r\n   /**\r\n    * Normalizes a string.\r\n    *\r\n    * @param str - A string to normalize for comparisons.\r\n    *\r\n    * @returns Cleaned string.\r\n    *\r\n    * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\r\n    */\r\n   static normalize(str: string)\r\n   {\r\n      return str.trim().normalize('NFD').replace(this.#regexNormalize, '');\r\n   }\r\n}\r\n","/**\r\n * Provides timing related higher-order functions.\r\n */\r\nexport abstract class Timing\r\n{\r\n   private constructor()\r\n   {\r\n      throw new Error('Timing constructor: This is a static class and should not be constructed.');\r\n   }\r\n\r\n   /**\r\n    * Wraps a callback in a debounced timeout. Delay execution of the callback function until the function has not been\r\n    * called for the given delay in milliseconds.\r\n    *\r\n    * @param callback - A function to execute once the debounced threshold has been passed.\r\n    *\r\n    * @param delay - An amount of time in milliseconds to delay.\r\n    *\r\n    * @returns A wrapped function that can be called to debounce execution.\r\n    *\r\n    * @example\r\n    * /**\r\n    *  * Debounce the update invocation by 500ms.\r\n    *  *\\/\r\n    * const updateDebounced = Timing.debounce(() => doc.update(), 500);\r\n    *\r\n    * // Use the function like:\r\n    * updateDebounced();\r\n    *\r\n    * @example\r\n    * /**\r\n    *  * Debounce the update invocation by 500ms.\r\n    *  *\r\n    *  * \\@param {string} value - A value to update.\r\n    *  *\\/\r\n    * const updateDebounced = Timing.debounce((value) => doc.update(value), 500);\r\n    *\r\n    * // Use the function like:\r\n    * updateDebounced('new value');\r\n    */\r\n   static debounce<Args extends unknown[] = unknown[]>(callback: (...args: Args) => void, delay: number):\r\n    (...args: Args) => void\r\n   {\r\n      if (typeof callback !== 'function')\r\n      {\r\n         throw new TypeError(`'callback' must be a function.`);\r\n      }\r\n\r\n      if (!Number.isInteger(delay) || delay < 0)\r\n      {\r\n         throw new TypeError(`'delay' must be a positive integer representing milliseconds.`);\r\n      }\r\n\r\n      let timeoutId: ReturnType<typeof setTimeout> | undefined;\r\n\r\n      return function(this: unknown, ...args)\r\n      {\r\n         globalThis.clearTimeout(timeoutId);\r\n         timeoutId = globalThis.setTimeout(() => { callback.apply(this, args); }, delay);\r\n      };\r\n   }\r\n\r\n   /**\r\n    * Creates a double click event handler that distinguishes between single and double clicks. Calls the `single`\r\n    * callback on a single click and the `double` callback on a double click. The default double click delay to invoke\r\n    * the `double` callback is 400 milliseconds.\r\n    *\r\n    * @param opts - Optional parameters.\r\n    *\r\n    * @param [opts.single] - Single click callback.\r\n    *\r\n    * @param [opts.double] - Double click callback.\r\n    *\r\n    * @param [opts.delay=400] - Double click delay.\r\n    *\r\n    * @returns The gated double-click handler.\r\n    *\r\n    * @example\r\n    * // Given a button element.\r\n    * button.addEventListener('click', Timing.doubleClick({\r\n    *    single: (event) => console.log('Single click: ', event),\r\n    *    double: (event) => console.log('Double click: ', event)\r\n    * });\r\n    */\r\n   static doubleClick<E extends Event = Event>({ single, double, delay = 400 }:\r\n    { single: (event: E) => void, double: (event: E) => void, delay: number }): (event: E) => void\r\n   {\r\n      if (single !== void 0 && typeof single !== 'function') { throw new TypeError(`'single' must be a function.`); }\r\n      if (double !== void 0 && typeof double !== 'function') { throw new TypeError(`'double' must be a function.`); }\r\n\r\n      if (!Number.isInteger(delay) || delay < 0)\r\n      {\r\n         throw new TypeError(`'delay' must be a positive integer representing milliseconds.`);\r\n      }\r\n\r\n      let clicks: number = 0;\r\n      let timeoutId: ReturnType<typeof setTimeout> | undefined;\r\n\r\n      return (event) =>\r\n      {\r\n         globalThis.clearTimeout(timeoutId);\r\n         clicks++;\r\n\r\n         if (clicks === 1)\r\n         {\r\n            timeoutId = globalThis.setTimeout(() =>\r\n            {\r\n               if (typeof single === 'function') { single(event); }\r\n               clicks = 0;\r\n            }, delay);\r\n         }\r\n         else\r\n         {\r\n            if (typeof double === 'function') { double(event); }\r\n            clicks = 0;\r\n         }\r\n      };\r\n   }\r\n}\r\n"],"names":[],"mappings":"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"}