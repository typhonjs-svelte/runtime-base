{"version":3,"file":"index.js","sources":["../../src/util/Hashing.js","../../src/util/Strings.js","../../src/util/Timing.js"],"sourcesContent":["/**\r\n * Provides various utilities for generating hash codes for strings and UUIDs.\r\n */\r\nexport class Hashing\r\n{\r\n   static #regexUuidv = /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i;\r\n\r\n   /**\r\n    * @hideconstructor\r\n    */\r\n   constructor()\r\n   {\r\n      throw new Error('Hashing constructor: This is a static class and should not be constructed.');\r\n   }\r\n\r\n   /**\r\n    * Provides a solid string hashing algorithm.\r\n    *\r\n    * Sourced from: https://stackoverflow.com/a/52171480\r\n    *\r\n    * @param {string}   str - String to hash.\r\n    *\r\n    * @param {number}   [seed=0] - A seed value altering the hash.\r\n    *\r\n    * @returns {number} Hash code.\r\n    */\r\n   static hashCode(str, seed = 0)\r\n   {\r\n      if (typeof str !== 'string') { return 0; }\r\n\r\n      let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;\r\n\r\n      for (let ch, i = 0; i < str.length; i++)\r\n      {\r\n         ch = str.charCodeAt(i);\r\n         h1 = Math.imul(h1 ^ ch, 2654435761);\r\n         h2 = Math.imul(h2 ^ ch, 1597334677);\r\n      }\r\n\r\n      h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);\r\n      h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);\r\n\r\n      return 4294967296 * (2097151 & h2) + (h1 >>> 0);\r\n   }\r\n\r\n   /**\r\n    * Validates that the given string is formatted as a UUIDv4 string.\r\n    *\r\n    * @param {string}   uuid - UUID string to test.\r\n    *\r\n    * @returns {boolean} Is UUIDv4 string.\r\n    */\r\n   static isUuidv4(uuid)\r\n   {\r\n      return this.#regexUuidv.test(uuid);\r\n   }\r\n\r\n   /**\r\n    * Generates a UUID v4 compliant ID. Please use a complete UUID generation package for guaranteed compliance.\r\n    *\r\n    * This code is an evolution of the following Gist.\r\n    * https://gist.github.com/jed/982883\r\n    *\r\n    * There is a public domain / free copy license attached to it that is not a standard OSS license...\r\n    * https://gist.github.com/jed/982883#file-license-txt\r\n    *\r\n    * @returns {string} UUIDv4\r\n    */\r\n   static uuidv4()\r\n   {\r\n      return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\r\n       (c ^ (globalThis.crypto ?? globalThis.msCrypto).getRandomValues(\r\n        new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\r\n   }\r\n}\r\n","/**\r\n * Provides utility functions for strings.\r\n */\r\nexport class Strings\r\n{\r\n   /**\r\n    * @hideconstructor\r\n    */\r\n   constructor()\r\n   {\r\n      throw new Error('Strings constructor: This is a static class and should not be constructed.');\r\n   }\r\n\r\n   /**\r\n    * Escape a given input string prefacing special characters with backslashes for use in a regular expression.\r\n    *\r\n    * @param {string}   string - An un-escaped input string.\r\n    *\r\n    * @returns {string} The escaped string suitable for use in a regular expression.\r\n    */\r\n   static escape(string)\r\n   {\r\n      return string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n   }\r\n\r\n   /**\r\n    * Normalizes a string.\r\n    *\r\n    * @param {string}   string - A string to normalize for comparisons.\r\n    *\r\n    * @returns {string} Cleaned string.\r\n    *\r\n    * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\r\n    */\r\n   static normalize(string)\r\n   {\r\n      return string.trim().normalize('NFD').replace(/[\\x00-\\x1F]/gm, ''); // eslint-disable-line no-control-regex\r\n   }\r\n}\r\n","/**\r\n * Provides timing related higher-order functions.\r\n *\r\n * This class should not be constructed as it only contains static methods.\r\n */\r\nexport class Timing\r\n{\r\n   /**\r\n    * @hideconstructor\r\n    */\r\n   constructor()\r\n   {\r\n      throw new Error('Timing constructor: This is a static class and should not be constructed.');\r\n   }\r\n\r\n   /**\r\n    * Wraps a callback in a debounced timeout. Delay execution of the callback function until the function has not been\r\n    * called for the given delay in milliseconds.\r\n    *\r\n    * @template Args\r\n    *\r\n    * @param {(...args: Args[]) => void} callback - A function to execute once the debounced threshold has been passed.\r\n    *\r\n    * @param {number}   delay - An amount of time in milliseconds to delay.\r\n    *\r\n    * @returns {(...args: Args[]) => void} A wrapped function that can be called to debounce execution.\r\n    *\r\n    * @example\r\n    * /**\r\n    *  * Debounce the update invocation by 500ms.\r\n    *  *\\/\r\n    * const updateDebounced = Timing.debounce(() => doc.update(), 500);\r\n    *\r\n    * // Use the function like:\r\n    * updateDebounced();\r\n    *\r\n    * @example\r\n    * /**\r\n    *  * Debounce the update invocation by 500ms.\r\n    *  *\r\n    *  * \\@param {string} value - A value to update.\r\n    *  *\\/\r\n    * const updateDebounced = Timing.debounce((value) => doc.update(value), 500);\r\n    *\r\n    * // Use the function like:\r\n    * updateDebounced('new value');\r\n    */\r\n   static debounce(callback, delay)\r\n   {\r\n      if (typeof callback !== 'function')\r\n      {\r\n         throw new TypeError(`'callback' must be a function.`);\r\n      }\r\n\r\n      if (!Number.isInteger(delay) || delay < 0)\r\n      {\r\n         throw new TypeError(`'delay' must be a positive integer representing milliseconds.`);\r\n      }\r\n\r\n      let timeoutId;\r\n\r\n      return function(...args)\r\n      {\r\n         globalThis.clearTimeout(timeoutId);\r\n         timeoutId = globalThis.setTimeout(() => { callback.apply(this, args); }, delay);\r\n      };\r\n   }\r\n\r\n   /**\r\n    * Creates a double click event handler that distinguishes between single and double clicks. Calls the `single`\r\n    * callback on a single click and the `double` callback on a double click. The default double click delay to invoke\r\n    * the `double` callback is 400 milliseconds.\r\n    *\r\n    * @param {object}   opts - Optional parameters.\r\n    *\r\n    * @param {(event: Event) => void} [opts.single] - Single click callback.\r\n    *\r\n    * @param {(event: Event) => void} [opts.double] - Double click callback.\r\n    *\r\n    * @param {number}   [opts.delay=400] - Double click delay.\r\n    *\r\n    * @returns {(event: Event) => void} The gated double-click handler.\r\n    *\r\n    * @example\r\n    * // Given a button element.\r\n    * button.addEventListener('click', Timing.doubleClick({\r\n    *    single: (event) => console.log('Single click: ', event),\r\n    *    double: (event) => console.log('Double click: ', event)\r\n    * });\r\n    */\r\n   static doubleClick({ single, double, delay = 400 })\r\n   {\r\n      if (single !== void 0 && typeof single !== 'function') { throw new TypeError(`'single' must be a function.`); }\r\n      if (double !== void 0 && typeof double !== 'function') { throw new TypeError(`'double' must be a function.`); }\r\n\r\n      if (!Number.isInteger(delay) || delay < 0)\r\n      {\r\n         throw new TypeError(`'delay' must be a positive integer representing milliseconds.`);\r\n      }\r\n\r\n      let clicks = 0;\r\n      let timeoutId;\r\n\r\n      return (event) =>\r\n      {\r\n         globalThis.clearTimeout(timeoutId);\r\n         clicks++;\r\n\r\n         if (clicks === 1)\r\n         {\r\n            timeoutId = globalThis.setTimeout(() =>\r\n            {\r\n               if (typeof single === 'function') { single(event); }\r\n               clicks = 0;\r\n            }, delay);\r\n         }\r\n         else\r\n         {\r\n            if (typeof double === 'function') { double(event); }\r\n            clicks = 0;\r\n         }\r\n      };\r\n   }\r\n}\r\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACO,MAAM,OAAO;AACpB;AACA,GAAG,OAAO,WAAW,GAAG,wEAAwE,CAAC;AACjG;AACA;AACA;AACA;AACA,GAAG,WAAW;AACd,GAAG;AACH,MAAM,MAAM,IAAI,KAAK,CAAC,4EAA4E,CAAC,CAAC;AACpG,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO,QAAQ,CAAC,GAAG,EAAE,IAAI,GAAG,CAAC;AAChC,GAAG;AACH,MAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE,EAAE,OAAO,CAAC,CAAC,EAAE;AAChD;AACA,MAAM,IAAI,EAAE,GAAG,UAAU,GAAG,IAAI,EAAE,EAAE,GAAG,UAAU,GAAG,IAAI,CAAC;AACzD;AACA,MAAM,KAAK,IAAI,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE;AAC7C,MAAM;AACN,SAAS,EAAE,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAChC,SAAS,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,UAAU,CAAC,CAAC;AAC7C,SAAS,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,EAAE,UAAU,CAAC,CAAC;AAC7C,OAAO;AACP;AACA,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC;AAC7F,MAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC;AAC7F;AACA,MAAM,OAAO,UAAU,IAAI,OAAO,GAAG,EAAE,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;AACtD,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO,QAAQ,CAAC,IAAI;AACvB,GAAG;AACH,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACzC,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO,MAAM;AAChB,GAAG;AACH,MAAM,OAAO,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,EAAE,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;AACtE,OAAO,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,MAAM,IAAI,UAAU,CAAC,QAAQ,EAAE,eAAe;AACtE,QAAQ,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;AAC3D,IAAI;AACJ;;AC1EA;AACA;AACA;AACO,MAAM,OAAO;AACpB;AACA;AACA;AACA;AACA,GAAG,WAAW;AACd,GAAG;AACH,MAAM,MAAM,IAAI,KAAK,CAAC,4EAA4E,CAAC,CAAC;AACpG,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO,MAAM,CAAC,MAAM;AACvB,GAAG;AACH,MAAM,OAAO,MAAM,CAAC,OAAO,CAAC,uBAAuB,EAAE,MAAM,CAAC,CAAC;AAC7D,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO,SAAS,CAAC,MAAM;AAC1B,GAAG;AACH,MAAM,OAAO,MAAM,CAAC,IAAI,EAAE,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC;AACzE,IAAI;AACJ;;ACtCA;AACA;AACA;AACA;AACA;AACO,MAAM,MAAM;AACnB;AACA;AACA;AACA;AACA,GAAG,WAAW;AACd,GAAG;AACH,MAAM,MAAM,IAAI,KAAK,CAAC,2EAA2E,CAAC,CAAC;AACnG,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO,QAAQ,CAAC,QAAQ,EAAE,KAAK;AAClC,GAAG;AACH,MAAM,IAAI,OAAO,QAAQ,KAAK,UAAU;AACxC,MAAM;AACN,SAAS,MAAM,IAAI,SAAS,CAAC,CAAC,8BAA8B,CAAC,CAAC,CAAC;AAC/D,OAAO;AACP;AACA,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,KAAK,GAAG,CAAC;AAC/C,MAAM;AACN,SAAS,MAAM,IAAI,SAAS,CAAC,CAAC,6DAA6D,CAAC,CAAC,CAAC;AAC9F,OAAO;AACP;AACA,MAAM,IAAI,SAAS,CAAC;AACpB;AACA,MAAM,OAAO,SAAS,GAAG,IAAI;AAC7B,MAAM;AACN,SAAS,UAAU,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;AAC5C,SAAS,SAAS,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,EAAE,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;AACzF,OAAO,CAAC;AACR,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,OAAO,WAAW,CAAC,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,GAAG,GAAG,EAAE;AACrD,GAAG;AACH,MAAM,IAAI,MAAM,KAAK,KAAK,CAAC,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,EAAE,MAAM,IAAI,SAAS,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,EAAE;AACrH,MAAM,IAAI,MAAM,KAAK,KAAK,CAAC,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,EAAE,MAAM,IAAI,SAAS,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,EAAE;AACrH;AACA,MAAM,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,KAAK,GAAG,CAAC;AAC/C,MAAM;AACN,SAAS,MAAM,IAAI,SAAS,CAAC,CAAC,6DAA6D,CAAC,CAAC,CAAC;AAC9F,OAAO;AACP;AACA,MAAM,IAAI,MAAM,GAAG,CAAC,CAAC;AACrB,MAAM,IAAI,SAAS,CAAC;AACpB;AACA,MAAM,OAAO,CAAC,KAAK;AACnB,MAAM;AACN,SAAS,UAAU,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;AAC5C,SAAS,MAAM,EAAE,CAAC;AAClB;AACA,SAAS,IAAI,MAAM,KAAK,CAAC;AACzB,SAAS;AACT,YAAY,SAAS,GAAG,UAAU,CAAC,UAAU,CAAC;AAC9C,YAAY;AACZ,eAAe,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;AACnE,eAAe,MAAM,GAAG,CAAC,CAAC;AAC1B,aAAa,EAAE,KAAK,CAAC,CAAC;AACtB,UAAU;AACV;AACA,SAAS;AACT,YAAY,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;AAChE,YAAY,MAAM,GAAG,CAAC,CAAC;AACvB,UAAU;AACV,OAAO,CAAC;AACR,IAAI;AACJ;;;;"}