{"version":3,"file":"index.js","sources":["../../src/util/_/Frozen.ts","../../src/util/_/Hashing.ts","../../src/util/_/Strings.ts","../../src/util/_/Timing.ts"],"sourcesContent":["/**\n * Provides strictly readonly collections at runtime including {@link ReadonlyMap} and {@link ReadonlySet}.\n *\n * The protection level provided is for accidental modification. A determined caller could still mutate via\n * `Map.prototype.set.call(frozenMap, ...)` or `Set.prototype.add.call(frozenSet, ...)`.\n */\nabstract class Frozen\n{\n   private constructor()\n   {\n      throw new Error('Frozen constructor: This is a static class and should not be constructed.');\n   }\n\n   /**\n    * @param [entries] - Target Map or iterable of [key, value] pairs.\n    *\n    * @returns A strictly ReadonlyMap.\n    */\n   static Map<K, V>(entries?: Iterable<[K, V]>): ReadonlyMap<K, V>\n   {\n      const result = new Map(entries) as ReadonlyMap<K, V>;\n\n      // @ts-expect-error\n      result.set = void 0;\n      // @ts-expect-error\n      result.delete = void 0;\n      // @ts-expect-error\n      result.clear = void 0;\n\n      return result;\n   }\n\n   /**\n    * @param [data] - Target Set or iterable list.\n    *\n    * @returns A strictly ReadonlySet.\n    */\n   static Set<T>(data?: Iterable<T>): ReadonlySet<T>\n   {\n      const result = new Set(data) as ReadonlySet<T>;\n\n      // @ts-expect-error\n      result.add = void 0;\n      // @ts-expect-error\n      result.delete = void 0;\n      // @ts-expect-error\n      result.clear = void 0;\n\n      return result;\n   }\n}\n\nObject.freeze(Frozen);\n\nexport { Frozen };\n","/**\r\n * Provides various utilities for generating hash codes for strings and UUIDs.\r\n */\r\nexport abstract class Hashing\r\n{\r\n   static #cryptoBuffer = new Uint8Array(1);\r\n\r\n   static #regexUuidv4 = /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i;\r\n\r\n   static #regexUuidReplace = /[018]/g;\r\n\r\n   static #uuidTemplate = '10000000-1000-4000-8000-100000000000';\r\n\r\n   private constructor()\r\n   {\r\n      throw new Error('Hashing constructor: This is a static class and should not be constructed.');\r\n   }\r\n\r\n   /**\r\n    * Provides a solid string hashing algorithm.\r\n    *\r\n    * Sourced from: https://stackoverflow.com/a/52171480\r\n    *\r\n    * @param str - String to hash.\r\n    *\r\n    * @param [seed=0] - A seed value altering the hash; default value: `0`.\r\n    *\r\n    * @returns Hash code.\r\n    */\r\n   static hashCode(str: string, seed: number = 0): number\r\n   {\r\n      if (typeof str !== 'string') { return 0; }\r\n\r\n      let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;\r\n\r\n      for (let ch, i = 0; i < str.length; i++)\r\n      {\r\n         ch = str.charCodeAt(i);\r\n         h1 = Math.imul(h1 ^ ch, 2654435761);\r\n         h2 = Math.imul(h2 ^ ch, 1597334677);\r\n      }\r\n\r\n      h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^ Math.imul(h2 ^ (h2 >>> 13), 3266489909);\r\n      h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^ Math.imul(h1 ^ (h1 >>> 13), 3266489909);\r\n\r\n      return 4294967296 * (2097151 & h2) + (h1 >>> 0);\r\n   }\r\n\r\n   /**\r\n    * Validates that the given string is formatted as a UUIDv4 string.\r\n    *\r\n    * @param uuid - UUID string to test.\r\n    *\r\n    * @returns Is UUIDv4 string.\r\n    */\r\n   static isUuidv4(uuid: unknown): uuid is string\r\n   {\r\n      return typeof uuid === 'string' && this.#regexUuidv4.test(uuid);\r\n   }\r\n\r\n   /**\r\n    * Generates a UUID v4 compliant ID. Please use a complete UUID generation package for guaranteed compliance.\r\n    *\r\n    * This code is an evolution of the `Jed UUID` from the following Gist.\r\n    * https://gist.github.com/jed/982883\r\n    *\r\n    * There is a public domain / free copy license attached to it that is not a standard OSS license...\r\n    * https://gist.github.com/jed/982883#file-license-txt\r\n    *\r\n    * @privateRemarks\r\n    * The code golfing was removed in the implementation below.\r\n    *\r\n    * @returns UUIDv4\r\n    */\r\n   static uuidv4(): string\r\n   {\r\n      return this.#uuidTemplate.replace(this.#regexUuidReplace, (c: string) =>\r\n       (Number(c) ^ (globalThis.crypto ?? (globalThis as any).msCrypto).getRandomValues(\r\n        this.#cryptoBuffer)[0] & 15 >> Number(c) / 4).toString(16));\r\n   }\r\n}\r\n","/**\r\n * Provides utility functions for strings.\r\n *\r\n * This class should not be constructed as it only contains static methods.\r\n */\r\nexport abstract class Strings\r\n{\r\n   static #regexEscape = /[-/\\\\^$*+?.()|[\\]{}]/g;\r\n   static #regexNormalize = /[\\x00-\\x1F]/gm;\r\n   static #regexReplacement = '\\\\$&';\r\n\r\n   private constructor()\r\n   {\r\n      throw new Error('Strings constructor: This is a static class and should not be constructed.');\r\n   }\r\n\r\n   /**\r\n    * Escape a given input string prefacing special characters with backslashes for use in a regular expression.\r\n    *\r\n    * @param str - An un-escaped input string.\r\n    *\r\n    * @returns The escaped string suitable for use in a regular expression.\r\n    */\r\n   static escape(str: string): string\r\n   {\r\n      return str.replace(this.#regexEscape, this.#regexReplacement);\r\n   }\r\n\r\n   /**\r\n    * Normalizes a string.\r\n    *\r\n    * @param str - A string to normalize for comparisons.\r\n    *\r\n    * @returns Cleaned string.\r\n    *\r\n    * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\r\n    */\r\n   static normalize(str: string)\r\n   {\r\n      return str.trim().normalize('NFD').replace(this.#regexNormalize, '');\r\n   }\r\n}\r\n","/**\r\n * Provides timing related higher-order functions.\r\n */\r\nexport abstract class Timing\r\n{\r\n   private constructor()\r\n   {\r\n      throw new Error('Timing constructor: This is a static class and should not be constructed.');\r\n   }\r\n\r\n   /**\r\n    * Wraps a callback in a debounced timeout. Delay execution of the callback function until the function has not been\r\n    * called for the given delay in milliseconds.\r\n    *\r\n    * @param callback - A function to execute once the debounced threshold has been passed.\r\n    *\r\n    * @param delay - An amount of time in milliseconds to delay.\r\n    *\r\n    * @returns A wrapped function that can be called to debounce execution.\r\n    *\r\n    * @example\r\n    * /**\r\n    *  * Debounce the update invocation by 500ms.\r\n    *  *\\/\r\n    * const updateDebounced = Timing.debounce(() => doc.update(), 500);\r\n    *\r\n    * // Use the function like:\r\n    * updateDebounced();\r\n    *\r\n    * @example\r\n    * /**\r\n    *  * Debounce the update invocation by 500ms.\r\n    *  *\r\n    *  * \\@param {string} value - A value to update.\r\n    *  *\\/\r\n    * const updateDebounced = Timing.debounce((value) => doc.update(value), 500);\r\n    *\r\n    * // Use the function like:\r\n    * updateDebounced('new value');\r\n    */\r\n   static debounce<Args extends unknown[] = unknown[]>(callback: (...args: Args) => void, delay: number):\r\n    (...args: Args) => void\r\n   {\r\n      if (typeof callback !== 'function')\r\n      {\r\n         throw new TypeError(`'callback' must be a function.`);\r\n      }\r\n\r\n      if (!Number.isInteger(delay) || delay < 0)\r\n      {\r\n         throw new TypeError(`'delay' must be a positive integer representing milliseconds.`);\r\n      }\r\n\r\n      let timeoutId: ReturnType<typeof setTimeout> | undefined;\r\n\r\n      return function(this: unknown, ...args)\r\n      {\r\n         globalThis.clearTimeout(timeoutId);\r\n         timeoutId = globalThis.setTimeout(() => { callback.apply(this, args); }, delay);\r\n      };\r\n   }\r\n\r\n   /**\r\n    * Creates a double click event handler that distinguishes between single and double clicks. Calls the `single`\r\n    * callback on a single click and the `double` callback on a double click. The default double click delay to invoke\r\n    * the `double` callback is 400 milliseconds.\r\n    *\r\n    * @param opts - Optional parameters.\r\n    *\r\n    * @param [opts.single] - Single click callback.\r\n    *\r\n    * @param [opts.double] - Double click callback.\r\n    *\r\n    * @param [opts.delay=400] - Double click delay.\r\n    *\r\n    * @returns The gated double-click handler.\r\n    *\r\n    * @example\r\n    * // Given a button element.\r\n    * button.addEventListener('click', Timing.doubleClick({\r\n    *    single: (event) => console.log('Single click: ', event),\r\n    *    double: (event) => console.log('Double click: ', event)\r\n    * });\r\n    */\r\n   static doubleClick<E extends Event = Event>({ single, double, delay = 400 }:\r\n    { single: (event: E) => void, double: (event: E) => void, delay: number }): (event: E) => void\r\n   {\r\n      if (single !== void 0 && typeof single !== 'function') { throw new TypeError(`'single' must be a function.`); }\r\n      if (double !== void 0 && typeof double !== 'function') { throw new TypeError(`'double' must be a function.`); }\r\n\r\n      if (!Number.isInteger(delay) || delay < 0)\r\n      {\r\n         throw new TypeError(`'delay' must be a positive integer representing milliseconds.`);\r\n      }\r\n\r\n      let clicks: number = 0;\r\n      let timeoutId: ReturnType<typeof setTimeout> | undefined;\r\n\r\n      return (event) =>\r\n      {\r\n         globalThis.clearTimeout(timeoutId);\r\n         clicks++;\r\n\r\n         if (clicks === 1)\r\n         {\r\n            timeoutId = globalThis.setTimeout(() =>\r\n            {\r\n               if (typeof single === 'function') { single(event); }\r\n               clicks = 0;\r\n            }, delay);\r\n         }\r\n         else\r\n         {\r\n            if (typeof double === 'function') { double(event); }\r\n            clicks = 0;\r\n         }\r\n      };\r\n   }\r\n}\r\n"],"names":[],"mappings":"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"}