{"version":3,"file":"index.js","sources":["../../../src/util/realm/CrossRealmUtil.ts","../../../src/util/realm/CrossRealmLanguage.ts","../../../src/util/realm/CrossRealmBrowser.ts","../../../src/util/realm/CrossRealm.ts"],"sourcesContent":["import { isObject } from '#runtime/util/object';\n\nexport abstract class CrossRealmUtil\n{\n   static isTagged(target: unknown, tag: string): target is Record<string, unknown>\n   {\n      return isObject(target) && Object.prototype.toString.call(target) === `[object ${tag}]`;\n   }\n\n   static isTaggedAny(target: unknown, ...tags: string[]): target is Record<string, unknown>\n   {\n      if (!isObject(target)) { return false; }\n\n      const tag = Object.prototype.toString.call(target);\n\n      return tags.some((entry) => tag === `[object ${entry}]`);\n   }\n}\n","import { isObject }        from '#runtime/util/object';\n\nimport { CrossRealmUtil }  from './CrossRealmUtil';\n\n/**\n * Methods that perform realm-safe checks for built-in JavaScript types and core ECMAScript language objects.\n */\nabstract class CrossRealmLanguage\n{\n   private constructor()\n   {\n      throw new Error('CrossRealmLanguage constructor: This is a static class and should not be constructed.');\n   }\n\n   /**\n    * {@link CrossRealmLanguage.API.isCtorName}\n    */\n   static isCtorName(target: unknown, types: string | Set<string>): boolean\n   {\n      if (!isObject(target)) { return false; }\n\n      if (typeof types === 'string' && target?.constructor?.name === types) { return true; }\n\n      return !!(types as Set<string>)?.has(target?.constructor?.name);\n   }\n\n   /**\n    * {@link CrossRealmLanguage.API.isDate}\n    */\n   static isDate(target: unknown): target is Date\n   {\n      return CrossRealmUtil.isTagged(target, 'Date');\n   }\n\n   /**\n    * {@link CrossRealmLanguage.API.isMap}\n    */\n   static isMap(target: unknown): target is Map<unknown, unknown>\n   {\n      return CrossRealmUtil.isTagged(target, 'Map');\n   }\n\n   /**\n    * {@link CrossRealmLanguage.API.isPromise}\n    */\n   static isPromise(target: unknown): target is Promise<unknown>\n   {\n      return CrossRealmUtil.isTagged(target, 'Promise');\n   }\n\n   /**\n    * {@link CrossRealmLanguage.API.isRegExp}\n    */\n   static isRegExp(target: unknown): target is RegExp\n   {\n      return CrossRealmUtil.isTagged(target, 'RegExp');\n   }\n\n   /**\n    * {@link CrossRealmLanguage.API.isSet}\n    */\n   static isSet(target: unknown): target is Set<unknown>\n   {\n      return CrossRealmUtil.isTagged(target, 'Set');\n   }\n}\n\ndeclare namespace CrossRealmLanguage {\n   export interface API {\n      /**\n       * Provides basic type checking by constructor name(s) for objects. This can be useful when checking multiple\n       * constructor names against a provided Set.\n       *\n       * @param target - Object to test for constructor name.\n       *\n       * @param types Specific constructor name or Set of constructor names to match.\n       *\n       * @returns Does the provided object constructor name match the types provided.\n       */\n      isCtorName(target: unknown, types: string | Set<string>): boolean;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a Date.\n       *\n       * @param target - A potential Date to test.\n       *\n       * @returns Is `target` a Date.\n       */\n      isDate(target: unknown): target is Date;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a Map.\n       *\n       * @param target - A potential Map to test.\n       *\n       * @returns Is `target` a Map.\n       */\n      isMap(target: unknown): target is Map<unknown, unknown>;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a Promise.\n       *\n       * @param target - A potential Promise to test.\n       *\n       * @returns Is `target` a Promise.\n       */\n      isPromise(target: unknown): target is Promise<unknown>;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a RegExp.\n       *\n       * @param target - A potential RegExp to test.\n       *\n       * @returns Is `target` a RegExp.\n       */\n      isRegExp(target: unknown): target is RegExp;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a Set.\n       *\n       * @param target - A potential Set to test.\n       *\n       * @returns Is `target` a Set.\n       */\n      isSet(target: unknown): target is Set<unknown>;\n   }\n}\n\nexport { CrossRealmLanguage };\n","import { isObject }           from '#runtime/util/object';\n\nimport { CrossRealmLanguage } from './CrossRealmLanguage';\nimport { CrossRealmUtil }     from './CrossRealmUtil';\n\n/**\n * Methods that perform realm-safe checks for DOM elements, browser globals, and Web Platform APIs.\n */\nabstract class CrossRealmBrowser\n{\n   private constructor()\n   {\n      throw new Error('CrossRealmBrowser constructor: This is a static class and should not be constructed.');\n   }\n\n   /**\n    * Class names for all focusable element types.\n    */\n   static #FocusableElementClassNames: string[] = ['HTMLAnchorElement', 'HTMLButtonElement', 'HTMLDetailsElement',\n    'HTMLEmbedElement', 'HTMLIFrameElement', 'HTMLInputElement', 'HTMLObjectElement', 'HTMLSelectElement',\n     'HTMLTextAreaElement'];\n\n   /**\n    * DOM nodes with defined `ownerDocument` property.\n    */\n   static #NodesWithOwnerDocument: Set<number> = new Set([Node.ELEMENT_NODE, Node.TEXT_NODE, Node.COMMENT_NODE,\n    Node.DOCUMENT_FRAGMENT_NODE]);\n\n   // Various UIEvent sets for duck typing by constructor name.\n\n   /**\n    * Duck typing class names for pointer events.\n    */\n   static #PointerEventSet: Set<string> = new Set(['MouseEvent', 'PointerEvent']);\n\n   /**\n    * Duck typing class names for all UIEvents.\n    */\n   static #UIEventSet: Set<string> = new Set(['UIEvent', 'FocusEvent', 'MouseEvent', 'WheelEvent', 'KeyboardEvent',\n    'PointerEvent', 'TouchEvent', 'InputEvent', 'CompositionEvent', 'DragEvent']);\n\n   /**\n    * Duck typing class names for events considered as user input.\n    */\n   static #UserInputEventSet: Set<string> = new Set(['KeyboardEvent', 'MouseEvent', 'PointerEvent']);\n\n   /**\n    * Internal options used by `#checkDOMInstanceType` when retrieving the Window reference from a Node that doesn't\n    * define `ownerDocument`.\n    */\n   static #optionsInternalCheckDOM: { throws: boolean } = { throws: false };\n\n   /**\n    * Match any DOM Document object by its default @@toStringTag.\n    * - HTMLDocument (`[object HTMLDocument]` in modern browsers & JSDOM)\n    * - generic Document (`[object Document]` in older or XML contexts)\n    */\n   static #regexTagDocument = /^\\[object (HTML)?Document]$/;\n\n   // Browser DOM Querying -------------------------------------------------------------------------------------------\n\n   /**\n    * {@link CrossRealmBrowser.API.isActiveElement}\n    */\n   static isActiveElement(target: Element): boolean\n   {\n      // Duck type if target has known defined `ownerDocument` property.\n      if (this.#hasOwnerDocument(target))\n      {\n         return target?.ownerDocument?.activeElement === target;\n      }\n\n      return false;\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.getActiveElement}\n    */\n   static getActiveElement(target: CrossRealmBrowser.Options.GetTarget,\n    { throws = true }: CrossRealmBrowser.Options.GetMethod = {}): Element | null | undefined\n   {\n      // Duck type if target has known defined `ownerDocument` property.\n      if (this.#hasOwnerDocument(target)) { return target?.ownerDocument?.activeElement ?? null; }\n\n      // Duck type if target is a UIEvent.\n      if (this.isUIEvent(target) && isObject(target?.view)) { return target?.view?.document?.activeElement ?? null; }\n\n      // Duck type if target is a Document.\n      if (this.isDocument(target)) { return target?.activeElement ?? null; }\n\n      // Duck type if target is a Window.\n      if (this.isWindow(target)) { return target?.document?.activeElement ?? null; }\n\n      if (throws) { throw new TypeError(`'target' must be a DOM Node / Element, Document, UIEvent, or Window.`); }\n\n      return void 0;\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.getDocument}\n    */\n   static getDocument(target: CrossRealmBrowser.Options.GetTarget,\n    { throws = true }: CrossRealmBrowser.Options.GetMethod = {}): Document | undefined\n   {\n      // Duck type if target has known defined `ownerDocument` property.\n      if (this.#hasOwnerDocument(target)) { return target?.ownerDocument; }\n\n      // Duck type if target is a UIEvent.\n      if (this.isUIEvent(target) && isObject(target?.view)) { return target?.view?.document; }\n\n      // Duck type if target is a Document.\n      if (this.isDocument(target)) { return target; }\n\n      // Duck type if target is a Window.\n      if (this.isWindow(target)) { return target?.document; }\n\n      if (throws) { throw new TypeError(`'target' must be a DOM Node / Element, Document, UIEvent, or Window.`); }\n\n      return void 0;\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.getWindow}\n    */\n   static getWindow(target: CrossRealmBrowser.Options.GetTarget,\n    { throws = true }: CrossRealmBrowser.Options.GetMethod = {}): Window | undefined\n   {\n      // Duck type if target has known defined `ownerDocument` property.\n      if (this.#hasOwnerDocument(target)) { return target.ownerDocument?.defaultView ?? globalThis as typeof window; }\n\n      // Duck type if target is a UIEvent.\n      if (this.isUIEvent(target) && isObject(target?.view)) { return target.view ?? globalThis as typeof window; }\n\n      // Duck type if target is a Document.\n      if (this.isDocument(target)) { return target.defaultView ?? globalThis as typeof window; }\n\n      // Duck type if target is a Window.\n      if (this.isWindow(target)) { return target; }\n\n      if (throws) { throw new TypeError(`'target' must be a DOM Node / Element, Document, UIEvent, or Window.`); }\n\n      return void 0;\n   }\n\n   // Browser API basic prototype tests ------------------------------------------------------------------------------\n\n   /**\n    * {@link CrossRealmBrowser.API.isCSSImportRule}\n    */\n   static isCSSImportRule(target: unknown): target is CSSImportRule\n   {\n      return CrossRealmUtil.isTagged(target, 'CSSImportRule');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isCSSLayerBlockRule}\n    */\n   static isCSSLayerBlockRule(target: unknown): target is CSSLayerBlockRule\n   {\n      return CrossRealmUtil.isTagged(target, 'CSSLayerBlockRule');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isCSSStyleRule}\n    */\n   static isCSSStyleRule(target: unknown): target is CSSStyleRule\n   {\n      return CrossRealmUtil.isTagged(target, 'CSSStyleRule');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isCSSStyleSheet}\n    */\n   static isCSSStyleSheet(target: unknown): target is CSSStyleSheet\n   {\n      return CrossRealmUtil.isTagged(target, 'CSSStyleSheet');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isDocument}\n    */\n   static isDocument(target: unknown): target is Document\n   {\n      return isObject(target) && this.#regexTagDocument.test(Object.prototype.toString.call(target));\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isURL}\n    */\n   static isURL(target: unknown): target is URL\n   {\n      return CrossRealmUtil.isTagged(target, 'URL');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isWindow}\n    */\n   static isWindow(target: unknown): target is Window\n   {\n      return CrossRealmUtil.isTagged(target, 'Window');\n   }\n\n   // Browser DOM Element typing -------------------------------------------------------------------------------------\n\n   /**\n    * {@link CrossRealmBrowser.API.isFocusableHTMLElement}\n    */\n   static isFocusableHTMLElement(target: unknown): boolean\n   {\n      for (let cntr = this.#FocusableElementClassNames.length; --cntr >= 0;)\n      {\n         if (this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, this.#FocusableElementClassNames[cntr]))\n         {\n            return true;\n         }\n      }\n\n      return false;\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isDocumentFragment}\n    */\n   static isDocumentFragment(target: unknown): target is DocumentFragment\n   {\n      return this.#checkDOMInstanceType(target, Node.DOCUMENT_FRAGMENT_NODE, 'DocumentFragment');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isElement}\n    */\n   static isElement(target: unknown): target is Element\n   {\n      return this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, 'Element');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isHTMLAnchorElement}\n    */\n   static isHTMLAnchorElement(target: unknown): target is HTMLAnchorElement\n   {\n      return this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, 'HTMLAnchorElement');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isHTMLElement}\n    */\n   static isHTMLElement(target: unknown): target is HTMLElement\n   {\n      return this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, 'HTMLElement');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isNode}\n    */\n   static isNode(target: unknown): target is Node\n   {\n      if (typeof (target as Node)?.nodeType !== 'number') { return false; }\n\n      if (target instanceof globalThis.Node) { return true; }\n\n      // Must retrieve the window by a more thorough duck type via `getWindow` as not all Nodes have `ownerDocument`\n      // defined.\n      const activeWindow = this.getWindow(target as Window, this.#optionsInternalCheckDOM);\n\n      const TargetNode = (activeWindow as typeof window)?.Node;\n      return TargetNode && target instanceof TargetNode;\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isShadowRoot}\n    */\n   static isShadowRoot(target: unknown): target is ShadowRoot\n   {\n      // ShadowRoot is a specialized type of DocumentFragment.\n      return this.#checkDOMInstanceType(target, Node.DOCUMENT_FRAGMENT_NODE, 'ShadowRoot');\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isSVGElement}\n    */\n   static isSVGElement(target: unknown): target is SVGElement\n   {\n      return this.#checkDOMInstanceType(target, Node.ELEMENT_NODE, 'SVGElement');\n   }\n\n   // Browser Event typing -------------------------------------------------------------------------------------------\n\n   /**\n    * {@link CrossRealmBrowser.API.isEvent}\n    */\n   static isEvent(target: unknown, types: string | Set<string>): target is Event\n   {\n      if (typeof (target as Event)?.type !== 'string' || typeof (target as Event)?.defaultPrevented !== 'boolean' ||\n       typeof (target as Event)?.stopPropagation !== 'function')\n      {\n         return false;\n      }\n\n      return types !== void 0 ? CrossRealmLanguage.isCtorName(target, types) : true;\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isPointerEvent}\n    */\n   static isPointerEvent(target: unknown): target is PointerEvent\n   {\n      return this.isEvent(target, this.#PointerEventSet);\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isUIEvent}\n    */\n   static isUIEvent(target: unknown): target is UIEvent\n   {\n      return this.isEvent(target, this.#UIEventSet);\n   }\n\n   /**\n    * {@link CrossRealmBrowser.API.isUserInputEvent}\n    */\n   static isUserInputEvent(target: unknown): target is KeyboardEvent | MouseEvent | PointerEvent\n   {\n      return this.isEvent(target, this.#UserInputEventSet);\n   }\n\n   // Browser Errors -------------------------------------------------------------------------------------------------\n\n   /**\n    * {@link CrossRealmBrowser.API.isDOMException}\n    */\n   static isDOMException(target: unknown, name: string): boolean\n   {\n      return CrossRealmUtil.isTagged(target, 'DOMException') && target.name === name;\n   }\n\n   // Internal implementation ----------------------------------------------------------------------------------------\n\n   /**\n    * Internal generic DOM `instanceof` check. First will attempt to find the class name by `globalThis` falling back\n    * to the {@link Window} associated with the DOM node.\n    *\n    * @param target - Target to test.\n    *\n    * @param nodeType - Node type constant.\n    *\n    * @param className - DOM classname for instanceof check.\n    *\n    * @returns Is the target the given nodeType and instance of class name.\n    */\n   static #checkDOMInstanceType(target: unknown, nodeType: number, className: string): boolean\n   {\n      if (!isObject(target)) { return false; }\n\n      if (target.nodeType !== nodeType) { return false; }\n\n      const GlobalClass: any = (window as unknown as Record<string, unknown>)[className];\n\n      if (GlobalClass && target instanceof GlobalClass) { return true; }\n\n      const activeWindow: Window | undefined | null = this.#hasOwnerDocument(target) ?\n         target?.ownerDocument?.defaultView :\n         // @ts-ignore: Safe in this context.\n         this.getWindow(target, this.#optionsInternalCheckDOM);\n\n      const TargetClass: any = (activeWindow as unknown as Record<string, unknown>)?.[className];\n\n      return TargetClass && target instanceof TargetClass;\n   }\n\n   static #hasOwnerDocument(target: unknown): target is Element\n   {\n      return typeof target === 'object' && target !== null &&\n       this.#NodesWithOwnerDocument.has((target as Node)?.nodeType);\n   }\n}\n\ndeclare namespace CrossRealmBrowser {\n   export interface API {\n      // Browser DOM Querying ----------------------------------------------------------------------------------------\n\n      /**\n       * Test if the given target element is the current active element.\n       *\n       * @param target - Element to test as current active element.\n       *\n       * @returns Whether the given element is the active element.\n       */\n      isActiveElement(target: Element): boolean;\n\n      /**\n       * Get `document.activeElement` value for a given DOM or event target.\n       *\n       * @param target - DOM Node / Element, EventTarget, Document, UIEvent or Window to query.\n       *\n       * @param [options] - Options.\n       *\n       * @returns Active element or `undefined` when `throws` option is `false` and the target is invalid.\n       *\n       * @throws {@link TypeError} Target must be a DOM Node / Element, Document, UIEvent, or Window.\n       */\n      getActiveElement(target: CrossRealmBrowser.Options.GetTarget, options?: CrossRealmBrowser.Options.GetMethod):\n       Element | null | undefined;\n\n      /**\n       * Get the `Document` value in for a given DOM or event target.\n       *\n       * @param target - DOM Node / Element, EventTarget, Document, UIEvent or Window to query.\n       *\n       * @param [options] - Options.\n       *\n       * @returns {Document} Active document or `undefined` when `throws` option is `false` and the target is invalid.\n       *\n       * @throws {@link TypeError} Target must be a DOM Node / Element, Document, UIEvent, or Window.\n       */\n      getDocument(target: CrossRealmBrowser.Options.GetTarget, options?: CrossRealmBrowser.Options.GetMethod):\n       Document | undefined;\n\n      /**\n       * Get the `Window` value for a given DOM or event target.\n       *\n       * @param target - DOM Node / Element, EventTarget, Document, UIEvent or Window to query.\n       *\n       * @param [options] - Options.\n       *\n       * @returns Active window or `undefined` when `throws` option is `false` and the target is invalid.\n       *\n       * @throws {@link TypeError} Target must be a DOM Node / Element, Document, UIEvent, or Window.\n       */\n      getWindow(target: CrossRealmBrowser.Options.GetTarget, options?: CrossRealmBrowser.Options.GetMethod):\n       Window | undefined;\n\n      // Browser API basic prototype tests ---------------------------------------------------------------------------\n\n      /**\n       * Provides basic prototype string type checking if `target` is a CSSImportRule.\n       *\n       * @param target - A potential CSSImportRule to test.\n       *\n       * @returns Is `target` a CSSImportRule.\n       */\n      isCSSImportRule(target: unknown): target is CSSImportRule;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a CSSLayerBlockRule.\n       *\n       * @param target - A potential CSSLayerBlockRule to test.\n       *\n       * @returns Is `target` a CSSLayerBlockRule.\n       */\n      isCSSLayerBlockRule(target: unknown): target is CSSLayerBlockRule;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a CSSStyleRule.\n       *\n       * @param target - A potential CSSStyleRule to test.\n       *\n       * @returns Is `target` a CSSStyleRule.\n       */\n      isCSSStyleRule(target: unknown): target is CSSStyleRule;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a CSSStyleSheet.\n       *\n       * @param target - A potential CSSStyleSheet to test.\n       *\n       * @returns Is `target` a CSSStyleSheet.\n       */\n      isCSSStyleSheet(target: unknown): target is CSSStyleSheet;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a Document.\n       *\n       * @param target - A potential Document to test.\n       *\n       * @returns Is `target` a Document.\n       */\n      isDocument(target: unknown): target is Document;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a URL.\n       *\n       * @param target - A potential URL to test.\n       *\n       * @returns Is `target` a URL.\n       */\n      isURL(target: unknown): target is URL;\n\n      /**\n       * Provides basic prototype string type checking if `target` is a Window.\n       *\n       * @param target - A potential Window to test.\n       *\n       * @returns Is `target` a Window.\n       */\n      isWindow(target: unknown): target is Window;\n\n      // Browser DOM Element typing ----------------------------------------------------------------------------------\n\n      /**\n       * Ensures that the given target is an `instanceof` all known DOM elements that are focusable. Please note that\n       * additional checks are required regarding focusable state; use\n       * {@link #runtime/util/a11y!A11yHelper.isFocusable} for a complete check.\n       *\n       * @param target - Target to test for `instanceof` focusable HTML element.\n       *\n       * @returns Is target an `instanceof` a focusable DOM element.\n       */\n      isFocusableHTMLElement(target: unknown): boolean;\n\n      /**\n       * Provides precise type checking if `target` is a DocumentFragment.\n       *\n       * @param target - A potential DocumentFragment to test.\n       *\n       * @returns Is `target` a DocumentFragment.\n       */\n      isDocumentFragment(target: unknown): target is DocumentFragment;\n\n      /**\n       * Provides precise type checking if `target` is an Element.\n       *\n       * @param target - A potential Element to test.\n       *\n       * @returns Is `target` an Element.\n       */\n      isElement(target: unknown): target is Element;\n\n      /**\n       * Provides precise type checking if `target` is a HTMLAnchorElement.\n       *\n       * @param target - A potential HTMLAnchorElement to test.\n       *\n       * @returns Is `target` a HTMLAnchorElement.\n       */\n      isHTMLAnchorElement(target: unknown): target is HTMLAnchorElement;\n\n      /**\n       * Provides precise type checking if `target` is an HTMLElement.\n       *\n       * @param target - A potential HTMLElement to test.\n       *\n       * @returns Is `target` a HTMLElement.\n       */\n      isHTMLElement(target: unknown): target is HTMLElement;\n\n      /**\n       * Provides precise type checking if `target` is a Node.\n       *\n       * @param target - A potential Node to test.\n       *\n       * @returns Is `target` a DOM Node.\n       */\n      isNode(target: unknown): target is Node;\n\n      /**\n       * Provides precise type checking if `target` is a ShadowRoot.\n       *\n       * @param target - A potential ShadowRoot to test.\n       *\n       * @returns Is `target` a ShadowRoot.\n       */\n      isShadowRoot(target: unknown): target is ShadowRoot;\n\n      /**\n       * Provides precise type checking if `target` is a SVGElement.\n       *\n       * @param target - A potential SVGElement to test.\n       *\n       * @returns Is `target` a SVGElement.\n       */\n      isSVGElement(target: unknown): target is SVGElement;\n\n      // Browser Event typing ----------------------------------------------------------------------------------------\n\n      /**\n       * Provides basic duck type checking for `Event` signature and optional constructor name(s).\n       *\n       * @param target - A potential DOM event to test.\n       *\n       * @param [types] Specific constructor name or Set of constructor names to match.\n       *\n       * @returns Is `target` an Event with optional constructor name check.\n       */\n      isEvent(target: unknown, types: string | Set<string>): target is Event;\n\n      /**\n       * Provides basic duck type checking for `Event` signature for standard mouse / pointer events including\n       * `MouseEvent` and `PointerEvent`.\n       *\n       * @param target - A potential DOM event to test.\n       *\n       * @returns Is `target` a MouseEvent or PointerEvent.\n       */\n      isPointerEvent(target: unknown): target is PointerEvent;\n\n      /**\n       * Provides basic duck type checking for `Event` signature for all UI events.\n       *\n       * @param target - A potential DOM event to test.\n       *\n       * @returns Is `target` a UIEvent.\n       * @see https://developer.mozilla.org/en-US/docs/Web/API/UIEvent\n       */\n      isUIEvent(target: unknown): target is UIEvent;\n\n      /**\n       * Provides basic duck type checking for `Event` signature for standard user input events including\n       * `KeyboardEvent`, `MouseEvent`, and `PointerEvent`.\n       *\n       * @param target - A potential DOM event to test.\n       *\n       * @returns Is `target` a Keyboard, MouseEvent, or PointerEvent.\n       */\n      isUserInputEvent(target: unknown): target is KeyboardEvent | MouseEvent | PointerEvent;\n\n      // Browser Errors ----------------------------------------------------------------------------------------------\n\n      /**\n       * Provides basic duck type checking and error name for {@link DOMException}.\n       *\n       * @param target - Error to duck type test.\n       *\n       * @param name - Specific error name.\n       *\n       * @returns Is target a DOMException matching the error name.\n       *\n       * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMException#error_names\n       */\n      isDOMException(target: unknown, name: string): boolean;\n   }\n\n   export namespace Options {\n      /**\n       * Defines the DOM API targets usable for all `get` methods.\n       */\n      export type GetTarget = Document | EventTarget | Node | UIEvent | Window;\n\n      /**\n       * Defines options for all `get` methods.\n       */\n      export interface GetMethod {\n         /**\n          * When `true` and the target is invalid, throw an exception. If `false` and the target is invalid `undefined`\n          * is returned; default: `true`.\n          *\n          * @defaultValue `true`\n          */\n         throws?: boolean;\n      }\n   }\n}\n\nexport { CrossRealmBrowser }\n","import { CrossRealmBrowser }  from './CrossRealmBrowser';\nimport { CrossRealmLanguage } from './CrossRealmLanguage';\n\n/**\n * Provides cross-realm checks for DOM nodes / elements, events, and essential duck typing for any class-based object\n * with a constructor name. A realm is an execution environment with its own global object and intrinsics; values\n * created in different realms do not share prototypes, so checks like `instanceof` can fail across realms. This\n * includes sharing JS code across browser windows.\n *\n * The impetus is that certain browsers such as Chrome and Firefox behave differently when performing `instanceof`\n * checks when elements are moved between browser windows. With Firefox in particular, the entire JS runtime cannot use\n * `instanceof` checks as the instances of fundamental DOM elements differ between windows.\n *\n * TRL supports moving applications from a main central browser window and popping them out into separate standalone\n * app instances in a separate browser window. In this case, for essential DOM element and event checks, it is necessary\n * to employ the workarounds found in `CrossRealm`.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution_model#realms\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof#instanceof_and_multiple_realms\n * @see https://262.ecma-international.org/#sec-code-realms\n */\nabstract class CrossRealm\n{\n   private constructor()\n   {\n      throw new Error('CrossRealm constructor: This is a static class and should not be constructed.');\n   }\n\n   /**\n    * @returns Methods that perform realm-safe checks for DOM elements, browser globals, and Web Platform APIs.\n    */\n   static get browser(): CrossRealm.Browser.API { return CrossRealmBrowser; }\n\n   /**\n    * @returns Methods that perform realm-safe checks for built-in JavaScript types and core ECMAScript language\n    *          objects.\n    */\n   static get lang(): CrossRealm.Language.API { return CrossRealmLanguage; }\n}\n\ndeclare namespace CrossRealm {\n   export namespace Browser {\n      export import Options = CrossRealmBrowser.Options;\n      export import API = CrossRealmBrowser.API;\n   }\n\n   export namespace Language {\n      export import API = CrossRealmLanguage.API;\n   }\n}\n\nexport { CrossRealm }\n"],"names":[],"mappings":"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"}